
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("fs"),require("websocket"),require("adm-zip"),require("child_process"),require("http"),require("https"),require("mkdirp"),require("net"),require("os"),require("path"),require("request"),require("url")):"function"==typeof define&&define.amd?define("spe",["fs","websocket","adm-zip","child_process","http","https","mkdirp","net","os","path","request","url"],n):"object"==typeof exports?exports.spe=n(require("fs"),require("websocket"),require("adm-zip"),require("child_process"),require("http"),require("https"),require("mkdirp"),require("net"),require("os"),require("path"),require("request"),require("url")):e.spe=n(e.fs,e.websocket,e["adm-zip"],e.child_process,e.http,e.https,e.mkdirp,e.net,e.os,e.path,e.request,e.url)}(this,function(e,n,t,o,r,i,c,a,u,l,s,f){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=63)}([function(n,t){n.exports=e},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=1},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./spaceifyconfig":14};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=2},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=3},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=4},function(e,n,t){"use strict";function o(){var e=this;e.globale={log:null,dir:null,info:null,error:null,warn:null,all:null},e.default_={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Manifest={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.ApplicationManager={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.AppManService={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.BinaryRpcCommunicator={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Core={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Database={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.DHCPDLog={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.DockerContainer={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.DockerHelper={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.DockerImage={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.EdgeSpaceifyNet={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.HttpService={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Iptables={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Main={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Manager={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Messaging={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.PubSub={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.RpcCommunicator={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SecurityModel={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Service={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyApplication={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyApplicationManager={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyConfig={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyCore={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyError={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyMessages={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyNet={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyNetwork={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyService={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SpaceifyUtility={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.Spacelet={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.SPM={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:!1},e.ValidateApplication={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebOperation={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebRtcClient={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebRtcConnection={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebServer={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebSocketConnection={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebSocketRpcConnection={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebSocketRpcServer={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null},e.WebSocketServer={log:!0,dir:!0,info:!0,error:!0,warn:!0,all:null}}o.getConfig=function(){return new o},e.exports=o},function(e,n,t){"use strict";function o(e){var n=this;n.path=e&&e.path?e.path:"",n.code=e&&e.code?e.code:"",n.message=e&&e.message?e.message:"";var t=", ",o=", ",r=" ";n.set=function(e){n.path=e.path||"",n.code=e.code||"",n.message=e.message||""},n.getAsObject=function(){return{code:n.code,codes:[n.code],message:n.message,messages:[n.message],path:n.path,paths:[n.path]}},n.getMessage=function(){return n.message},n.getCode=function(){return n.code},n.getPath=function(){return n.path},n.pre=function(e){n.path=e;var t=Array.prototype.slice.call(arguments);return t[0]=n.getAsObject(),n.make.apply(this,t)},n.preFmt=function(e,t){return n.path=e,n.makeFmt(n.getAsObject(),t)},n.make=function(){var e,n="",i=[],c="",a=[],u="",l=[];for(e=0;e<arguments.length;e++){var s=arguments[e];s.messages?(i=i.concat(s.paths),a=a.concat(s.codes),l=l.concat(s.messages)):(i.push(s.path?s.path:""),a.push(s.code?s.code:""),l.push(s.message?s.message:s.toString()))}for(e=0;e<l.length;e++)a[e]&&(c+=(""!=c?t:"")+a[e]),i[e]&&(n+=(""!=n?o:"")+i[e]),u+=(""!=u?r:"")+l[e];return{code:c,message:u,path:n,codes:a,paths:i,messages:l}},n.makeFmt=function(e,t){return e.message=n.replace(e.message,t),e.messages&&e.messages.length>0&&(e.messages[0]=e.message),n.make(e)},n.makeErrorObject=function(e,n,t){var o="undefined"!=typeof e?e:"",r="undefined"!=typeof t?t:"",i="undefined"!=typeof n?n:"";return{code:o,codes:[o],message:i,messages:[i],path:r,paths:[r]}},n.errorFromObject=function(e){return"string"==typeof e&&(e=JSON.parse(e)),n.make(n.makeErrorObject(e.code,e.message,e.path))},n.typeToErrorObject=function(e){return e?"string"==typeof e?e=n.makeErrorObject("",e,""):e.codes||e.messages||e.paths||(e=n.make(e)):e=n.makeErrorObject("###","###","###"),e},n.errorToString=function(e,t,o){var i="",c="",a="",u="";if("string"==typeof e)i+=e;else if(e.message&&!e.messages)i+=e.message;else if(e.pop)for(;e.length>0;)i+=(""!=i?r:"")+n.errorToString(e.shift());else if(e.messages)for(var l=0;l<e.messages.length;l++)c=o&&e.codes[l]?e.codes[l]:null,a=t&&e.paths[l]?e.paths[l]:null,u=n.ucfirst(e.messages[l]),u=n.endWithDot(u),i+=""!=i?" ":"",i+=a?a:"",i+=c?(a?" - ":"")+c:"",i+=(c||a?" ":"")+u;return i},n.replace=function(e,n,t){var o=t?t:"";for(var r in n)"undefined"!=typeof n[r]&&(e=e.replace(r,n[r]));return e=e.replace(/\s~[a-zA-Z0-9]*\s/g," "+o+" "),e=e.replace(/~[a-zA-Z0-9]*\s/g," "+o+" "),e=e.replace(/\s~[a-zA-Z0-9]*/g,o),e=e.replace(/~[a-zA-Z0-9]+/g,o)},n.ucfirst=function(e){return e=e.trim(),e.charAt(0).toUpperCase()+e.slice(1)},n.endWithDot=function(e){return e=e.trim(),"."!=e.charAt(e.length-1)&&(e+="."),e}}e.exports=o},function(e,n,t){"use strict";function o(){function e(e,n,t,o){var r,c="object"==typeof e?e.service_name:e;n[c]||(n[c]=new i(c,!1,new f),n[c].setConnectionListener(P),n[c].setDisconnectionListener(T)),"object"==typeof e?(r=t?e.securePort:e.port,I(n[c],r,t,function(){"function"==typeof o&&o(null,n[c])})):d.getService(c,"",function(e,i){!i||e?(n[c].getIsOpen()||T(-1,c,t),"function"==typeof o&&o(A,null)):(r=t?i.securePort:i.port,I(n[c],r,t,function(){"function"==typeof o&&o(null,n[c])}))})}var n=this,o="undefined"==typeof window,r=null,i=null,c=null,a=null,u=null,l=null,s=null,f=null,p=null;o?(r="/var/lib/spaceify/code/",i=t(45)(r+"service"),c=t(27)(r+"spaceifycore"),a=t(28)(r+"spaceifyerror"),u=t(49)(r+"websocketrpcserver"),l=t(2)(r+"spaceifyconfig"),s=t(46)(r+"spaceifynetwork"),f=t(29)(r+"websocketrpcconnection"),p=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}()):(r=window.spe?window.spe:window,i=r.Service,c=r.SpaceifyCore,a=r.SpaceifyError,u=null,l=r.SpaceifyConfig,s=r.SpaceifyNetwork,f=r.WebSocketRpcConnection,p=function(e){return e});var d=new c,g=new a,y=new s,w=l.getConfig("realpaths"),h={},m={},v={},S={},R=!0,E=!0,O={},C=w.SPACEIFY_CODE_PATH+w.SPACEIFY_CRT_WWW,b=w.VOLUME_TLS_PATH+w.SERVER_KEY,_=w.VOLUME_TLS_PATH+w.SERVER_CRT,A=g.makeErrorObject("not_open","Connection is not ready.","SpaceifyService::connect");n.connect=function(n,t,r){var i="object"==typeof n?n.service_name:n;return i==w.HTTP?r(A,null):("function"==typeof t?(r=t,t=!o&&y.isSecure()):t=o?t:y.isSecure(),void e(n,t?m:h,t,r))};var I=function(e,n,t,o){return e.getIsOpen()?o():void e.getConnection().connect({hostname:w.EDGE_HOSTNAME,port:n,isSecure:t,caCrt:C},o)};n.disconnect=function(e,n){var t;e?service_name.constructor!==Array&&(t=[e]):t=Object.keys(h);for(var o=0;o<t.length;o++)t[o]in h&&h[t[o]].getConnection().close(),t[o]in m&&m[t[o]].getConnection().close()};var P=function(e,n,t){},T=function(e,n,t){if(E){var o=n+(t?"T":"F");if(!(o in O)){var r=t?m[n]:h[n];O[o]=setTimeout(L,w.RECONNECT_WAIT,e,n,t,o,r)}}},L=function(e,n,t,o,r){d.getService(n,"",function(i,c){delete O[o],c?I(r,t?c.securePort:c.port,t,function(){}):T(e,n,t)})};n.getRequiredService=function(e){return h[e]?h[e]:null},n.getRequiredServiceSecure=function(e){return m[e]?m[e]:null},n.keepConnectionUp=function(e){E="boolean"==typeof e&&e},n.listen=p(function(e,n,t,o,r,c){"undefined"==typeof r&&(r=!0),"undefined"==typeof c&&(c=!0),v[e]||(v[e]=new i(e,!0,new u)),S[e]||(S[e]=new i(e,!0,new u)),r&&D.sync(v[e],t,!1),c&&D.sync(S[e],o,!0),t&&o||(r&&(t=v[e].getServer().getPort()),c&&(o=S[e].getServer().getPort()),console.log("    LISTEN -----> "+e+" - port: "+t+", secure port: "+o)),d.sync.registerService(e,{unique_name:n,port:t,securePort:o})});var D=p(function(e,n,t){e.getIsOpen()||e.getServer().sync.listen({hostname:null,port:n,isSecure:t,key:b,crt:_,caCrt:C,keepUp:R})});n.close=function(e){var n;"undefined"==typeof service_names?n=Object.keys(v):"undefined"!=typeof service_names&&e.constructor!==Array&&(n=[service_names]);for(var t=0;t<n.length;t++)n[t]in v&&v[n[t]].getServer().close(),n[t]in S&&S[n[t]].getServer().close()},n.getProvidedService=function(e){return v[e]?v[e]:null},n.getProvidedServiceSecure=function(e){return S[e]?S[e]:null},n.keepServerUp=function(e){R="boolean"==typeof e&&e}}e.exports=o},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./spaceifyutility":18};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=8},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./binaryrpccommunicator":19,"./rpccommunicator":21};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=9},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=10},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./websocketconnection":22};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=11},function(e,n,t){"use strict";(function(n){function o(e){var n=this,r=null,i="undefined"==typeof window;if(i){var c="/var/lib/spaceify/code/spaceifyerror";o.ifFileExists("./spaceifyerror.js")?r=t(6):o.ifFileExists(c)&&(r=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}())}else"undefined"!=typeof window&&(r=window.SpaceifyError?window.SpaceifyError:null);r&&(r=new r),n.RETURN=1;var a="log",u="dir",l="info";n.ERROR="error";var s=n.ERROR,f="warn";n.FORCE="force";var p=n.FORCE,d="stdout",g={};g[a]="[i] ",g[u]="[d] ",g[l]="[i] ",g[s]="[e] ",g[f]="[w] ",g[p]="",g[d]="";var y=e?e:{};y[a]="undefined"==typeof y[a]||y[a],y[u]="undefined"==typeof y[u]||y[u],y[l]="undefined"==typeof y[l]||y[l],y[s]="undefined"==typeof y[s]||y[s],y[f]="undefined"==typeof y[f]||y[f],y[p]=!0,y[d]=!0,n.log=function(){w(a,!1,arguments)},n.dir=function(){w(u,!1,arguments)},n.info=function(){w(l,!1,arguments)},n.error=function(){h.apply(this,arguments)},n.warn=function(){w(f,!1,arguments)},n.force=function(){w(p,!1,arguments)},n.stdout=function(){w(d,!0,arguments)};var w=function(e,n){if(y[e]||e==p){var t,o="",r=arguments[2];if(i){for(var c=0;c<r.length;c++)t="string"==typeof r[c]?r[c]:JSON.stringify(r[c]),o+=(""!=o&&"\n"!=o&&"\r"!=o&&"\r\n"!=o?" ":"")+t;o=o.replace(/[\x00-\x09\x0b-\x0c\x0e-\x1f]/g,""),process.stdout.write(g[e]+o+(n?"":"\n"))}else e==u&&console.dir?console.dir.apply(this,arguments[2]):e==s&&console.error?console.error.apply(this,arguments[2]):e==l&&console.info?console.info.apply(this,arguments[2]):e==f&&console.warn?console.warn.apply(this,arguments[2]):console.log.apply(this,arguments[2])}},h=function(e,t,o,i){var c=r?r.errorToString(e,t,o):e;return i==s?w.call(n,s,!1,[c]):i==p&&n.force(c),c};n.setOptions=function(e){for(var n in e)y[n]=e[n]},n.clone=function(e){var n=e.getEnabled();y[a]=n[a],y[u]=n[u],y[l]=n[l],y[s]=n[s],y[f]=n[f]},n.getEnabled=function(){return y}}o.ifFileExists=function(e){try{var n=t(0);return n.accessSync(e,n.F_OK),!0}catch(e){return!1}},o.getLogger=function(e,r){var i,c,a=null,u=null,l=null;if("undefined"==typeof window){var s="/var/lib/spaceify/code/";o.ifFileExists(n+"/loggerconfig.js")?l=t(5):o.ifFileExists(s+"loggerconfig.js")&&(l=t(44)(s+"loggerconfig.js"))}else"undefined"!=typeof window&&(a=window.spe?window.spe:window,l=a.LoggerConfig?a.LoggerConfig:null);if(u=l?l.getConfig():null){if(c=u[e]?u[e]:u.default_?u.default_:{},i="undefined"!=typeof c.all?c.all:null,null!==i)for(var f in c)c[f]=i;if(u.global_){i="undefined"!=typeof u.global_.all?u.global_.all:null;for(var f in u.global_)null===u.global_[f]&&null===i||(c[f]=i?i:u.global_[f])}if(r){i="undefined"!=typeof override.all?override.all:null;for(var f in r)null===r[f]&&null===i||(c[f]=i?i:u.global_[f])}}else c={};return new o(c)},e.exports=o}).call(n,"/")},function(e,n,t){"use strict";function o(e,n,o){var r=this,i="undefined"==typeof window,c=null,a=null,u=null;if(i)c="/var/lib/spaceify/code/",a=t(8)(c+"spaceifyutility"),u=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}();else{c=window.spe?window.spe:window;var a=c.SpaceifyUtility,u=function(e){return e}}var l=(new a,null),s=null,f=[],p=[];r.REQUIRED=0,r.PROVIDED=1;var d=function(n){for(var t=0;t<f.length;t++)f[t](n,e,r.getIsSecure())},g=function(n){for(var t=0;t<p.length;t++)p[t](n,e,r.getIsSecure())},y=function(n){l&&l(n,e,r.getIsSecure())},w=function(n){s&&w(n,e,r.getIsSecure())};r.setConnectionListener=function(e){"function"==typeof e&&f.push(e)},r.setDisconnectionListener=function(e){"function"==typeof e&&p.push(e)},r.setServerUpListener=function(e){l="function"==typeof e?e:null},r.setServerDownListener=function(e){s="function"==typeof e?e:null},r.getPort=function(){return o.getPort()},r.getIsOpen=function(){return o.getIsOpen()},r.getServiceName=function(){return e},r.getType=function(){return n?r.PROVIDED:r.REQUIRED},r.getId=function(){return o.getId()},r.getServer=function(){return n?o:null},r.getConnection=function(){return n?null:o},r.getIsSecure=function(){return o.getIsSecure()},r.exposeRpcMethod=function(e,n,t){o.exposeRpcMethod(e,n,t)},r.exposeRpcMethodSync=function(e,n,t){o.exposeRpcMethodSync(e,n,t)},r.callRpc=function(){o.callRpc.apply(this,arguments)},o.setConnectionListener(d),o.setDisconnectionListener(g),n&&(o.setServerUpListener(y),o.setServerDownListener(w))}e.exports=o},function(e,n,t){"use strict";(function(n){function o(){var e=this;e.initialize=function(o){var r,i,c,a="undefined"!=typeof o?o:"";if("webpack"==a||"undefined"==typeof window){i="webpack"==a?t(0).readFileSync(n+"/config.json","utf8"):t(0).readFileSync("/var/lib/spaceify/code/config.json","utf8"),c=JSON.parse(i);for(r in c)e[r]=c[r]}else for(r in window.speconfig)e[r]=window.speconfig[r];return"realpaths"==a&&e.makeRealApplicationPaths(),e},e.get=function(n){return n in e?e[n]:null},e.toMinifiedJSONString=function(){var n="",t="";for(var o in e)"function"!=typeof e[o]&&"object"!=typeof e[o]&&(t=e[o],"string"==typeof t&&(t=t.replace(/\\/g,"\\\\")),n+=(""!=n?",":"")+'"'+o+'":"'+t+'"');return"{"+n+"}"},e.makeRealApplicationPaths=function(){if("undefined"==typeof window){var n,r,i,c=process.cwd(),a=t(17),u=new a;e.API_PATH=e.SPACEIFY_CODE_PATH,e.API_WWW_PATH=e.SPACEIFY_WWW_PATH,e.API_NODE_MODULES_DIRECTORY=e.SPACEIFY_NODE_MODULES_PATH,r=c.split("/"),r[r.length-1]==e.APPLICATION_ROOT?(n=o(c),n&&(i=c.replace("/"+e.APPLICATION_ROOT,"/"),e.VOLUME_PATH=i,e.VOLUME_TLS_PATH=i+e.TLS_DIRECTORY,e.VOLUME_APPLICATION_PATH=i+e.APPLICATION_DIRECTORY,e.VOLUME_APPLICATION_WWW_PATH=i+e.APPLICATION_DIRECTORY+e.WWW_DIRECTORY)):(i=c+"/",n=o(c),n&&(e.VOLUME_PATH=i,e.VOLUME_APPLICATION_PATH=i,e.VOLUME_APPLICATION_WWW_PATH=i+e.WWW_DIRECTORY,e.VOLUME_TLS_PATH=u.getVolPath(n.type,n.unique_name,e)+e.VOLUME_TLS_PATH))}};var o=function(n){var o=null;try{o=t(0).readFileSync(n+"/"+e.MANIFEST,"utf8"),o=JSON.parse(o)}catch(e){}return o}}o.getConfig=function(e){var n=new o;return n.initialize(e)},e.exports=o}).call(n,"/")},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=!(!n||"undefined"==typeof process.env.IS_REAL_SPACEIFY),r=!("undefined"==typeof window||!window.isSpaceifyNetwork)&&window.isSpaceifyNetwork,i="undefined"!=typeof window&&!window.location.hostname.match(/.*spaceify\.net/),c=null,a=null,u=null,l=null,s=null,f=null;n?(c="/var/lib/spaceify/code/",u=null,l=function(){},s=t(2)(c+"spaceifyconfig"),f=t(29)(c+"websocketrpcconnection")):(c=window.spe?window.spe:window,a=window.spl?window.spl:window,u=a.LoaderUtil.getLoaderUtil(),l=c.SpaceifyNetwork,s=c.SpaceifyConfig,f=c.WebSocketRpcConnection);var p=new l,d=s.getConfig(),g=r||n||i?new f:u.getPiperClient(),y=[],w=null,h=!1,m=!1,v=!!n||p.isSecure(),S=n?d.SPACEIFY_CODE_PATH+d.SPACEIFY_CRT_WWW:"";e.startSpacelet=function(e,n){R("startSpacelet",[e],function(e,t,o,r){if(e)n(e,null);else{for(var i=[],c=0;c<t.length;c++)i.push(t[c].service_name);n(null,{services:t,serviceNames:i},o,r)}})},e.registerService=function(e,n,t){R("registerService",[e,n],t)},e.unregisterService=function(e,n,t){R("unregisterService",[e,n],t)},e.getService=function(e,n,t){R("getService",[e,n],t)},e.getServices=function(e,n){R("getServices",[e],n)},e.getOpenServices=function(e,n,t){R("getOpenServices",[e,n],t)},e.getManifest=function(e,n){var t=_()?b().getManifest(e):null;t?n(null,t,-1,0):R("getManifest",[e,!0,!1],function(t,o,r,i){!t&&_()&&b().setManifest(e,o),n(t,o,r,i)})},e.isAdminLoggedIn=function(e){p.doOperation({type:"isAdminLoggedIn"},function(n,t,o,r){e(n?n:null,!n&&t,o,r)})},e.getApplicationStatus=function(e,n){R("getApplicationStatus",[e],n)},e.isApplicationRunning=function(e,n){R("isApplicationRunning",[e],n)},e.getServiceRuntimeStates=function(e,n){R("getServiceRuntimeStates",[e],n)},e.getApplicationData=function(e){var n;R("getApplicationData",[],function(t,o,r,i){if(!t&&_()){for(n=0;n<o.spacelet.length;n++)b().setApplication(o.spacelet[n]);for(n=0;n<o.sandboxed.length;n++)b().setApplication(o.sandboxed[n]);for(n=0;n<o.sandboxed_debian.length;n++)b().setApplication(o.sandboxed_debian[n]);for(n=0;n<o.native_debian.length;n++)b().setApplication(o.native_debian[n])}e(t,o,r,i)})},e.getApplicationURL=function(e,n){R("getApplicationURL",[e],n)},e.setSplashAccepted=function(e){R("setSplashAccepted",[],e)},e.setEventListeners=function(e,n,t,o,r){R("setEventListeners",[e],function(o,i,c,a){if(!o)for(var u=0;u<e.length;u++)g.exposeRpcMethod(e[u],t,n[u]);r(o,i,c,a)})};var R=function(e,n,t){var o;m?y.push({method:e,params:n,callback:t}):h?(y.push({method:e,params:n,callback:t}),E()):(m=!0,y.push({method:e,params:n,callback:t}),C(function(e,n){if(e)for(;"undefined"!=typeof(o=y.shift());)o.callback(e,null,-1,0);else E()}))},E=function(){var e=y.shift();"undefined"!=typeof e&&O(e.method,e.params,function(){e.callback.apply(this,arguments),E()})},O=function(t,o,c){r||n||i?g.callRpc(t,o,e,function(e,n,t,o){c(e,n,t,o)}):g.callClientRpc(w,t,o,e,function(e,n){c(e,n)})},C=function(e){var t,c,a,u=v?d.CORE_PORT_SECURE:d.CORE_PORT;r||n||i?(c=n?o?d.EDGE_IP:d.CONNECTION_HOSTNAME:d.EDGE_HOSTNAME,g.connect({hostname:c,port:u,isSecure:v,caCrt:S},function(n,t){n?(h=!1,m=!1,e(n,null)):(h=!0,m=!1,e(null,!0))})):(a=v?"https":"http",t=p.getEdgeURL({forceSecureProtocol:null,ownProtocol:null,port:null,withEndSlash:!1}),g.createWebSocketTunnel({host:t,port:u,protocol:a},null,function(n){w=n,h=!0,m=!1,e(null,!0)}))};e.close=function(){g&&g.close&&g.close(),g=null};var b=function(){return!n&&window&&window.spaceifyCache?window.spaceifyCache:null},_=function(){var e=b();return"undefined"!=e&&null!=e}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=null,r=null,i=null,c=null;n?(o="/var/lib/spaceify/code/",r=t(28)(o+"spaceifyerror"),i=t(2)(o+"spaceifyconfig"),c=t(8)(o+"spaceifyutility")):(o=window.spe?window.spe:window,r=o.SpaceifyError,i=o.SpaceifyConfig,c=o.SpaceifyUtility);var a=new r,u=new c,l=i.getConfig();e.getEdgeURL=function(n){var t=e.getProtocol(!0,n.ownProtocol,n.forceSecureProtocol),o="undefined"!=typeof window?window.location.hostname:l.EDGE_HOSTNAME;return t+o+(n.port?":"+n.port:"")+(n.withEndSlash?"/":"")},e.externalResourceURL=function(n,t){return e.getEdgeURL(t)+n+"/"},e.getPort=function(n,t,o){return e.isSecure()||o?t:n},e.isSecure=function(){var n=e.getProtocol(!1,null,!1);return"http:"!=n},e.getProtocol=function(e,n,t){var o,r,i;return null===n&&null===t?i="":"undefined"==typeof window?i=null===n?"":t?"https:":n:(i=null!==n?n:location.protocol,"blob:"==i&&(window.parent?(o=""+window.parent.location,o=o.replace(/^blob:/,""),i=null!==(r=o.match(/^http.?:/))?r[0]:"http:"):i="http:"),t&&(i="https:")),""==i||i.match(/:$/)||(i+=":"),i+(""!=i&&e?"//":"")},e.parseQuery=function(e){var n,t,o,r={};if(e=decodeURIComponent(e),e=e.replace(/#.*$/,""),n=e.split("?"),1==n.length&&"?"!=e.charAt(0))return r;n=n.length<2?n[0]:n[1],o=n.split("&");for(var i=0,c=o.length;i<c;i++)o[i]&&(t=o[i].split("="),r[t[0]]=2==t.length?t[1]:null);return r},e.remakeQueryString=function(e,n,t,o,r){var i,c,a,u="";for(i in n)i in e&&delete e[i];for(i in t)e[i]=t[i];for(i in e)r?(a=decodeURIComponent(e[i]),a=encodeURIComponent(a)):a=e[i],u+=(""!=u?"&":"")+i+"="+a;return o?(o=decodeURIComponent(o),(c=o.match(/(?:#.*)/,""))&&(c=c[0]),o=o.replace(/\?.*$/,"")):(c="",o=""),o=o+(u?"?"+u:"")+(c?c:"")},e.isSpaceifyNetwork=function(e,n){var t=new window.XMLHttpRequest;t.open("HEAD",window.location.protocol+"//10.0.0.1/templates/test.txt",!0),t.timeout=e,t.onreadystatechange=function(){4==t.readyState&&n(t.status>=200&&t.status<304)},t.send()},e.parseURL=function(e){for(var n={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=n.parser[n.strictMode?"strict":"loose"].exec(e),o={},r=14;r--;)o[n.key[r]]=t[r]||"";return o[n.q.name]={},o[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(o[n.q.name][t]=r)}),o},e.implementsWebServer=function(e){return!(!e.implements||e.implements.indexOf(l.WEB_SERVER)==-1)},e.isPortInUse=function(e,n){if(!e)return n(null,!0);var o=t(58),r=o.createServer();r.once("error",function(e){n("EADDRINUSE"!=e.code?e:null,!0)}),r.once("listening",function(){r.once("close",function(){n(null,!1)}),r.close()}),r.listen(e)},e.GET=function(e,n,t){var o=Date.now(),r=u.randomString(16,!0),i=s();i.onreadystatechange=function(){f(i,r,o,n)},i.open("GET",e,!0),i.responseType=t?t:"",i.send()},e.POST_FORM=function(e,n,t,o){if("undefined"!=typeof spaceifyLoader)spaceifyLoader.postData(e,n,t,o);else{for(var r="---------------------------"+Date.now().toString(16),i="",c=0;c<n.length;c++)i+="\r\n--"+r+"\r\n",i+=n[c].content,i+="\r\n\r\n"+n[c].data+"\r\n";i+="\r\n--"+r+"--";var a=s();a.open("POST",e,!0),a.responseType=t?t:"text",a.setRequestHeader("Content-Type","multipart/form-data; boundary="+r),a.onreadystatechange=function(){f(a,u.randomString(16,!0),Date.now(),o)},a.send(i)}},e.doOperation=function(n,t){var o,r,i,c=null;try{r="Content-Disposition: form-data; name=operation;\r\nContent-Type: application/json; charset=utf-8",i=e.getEdgeURL({forceSecureProtocol:!0,ownProtocol:null,port:null,withEndSlash:!0})+l.OPERATION,e.POST_FORM(i,[{content:r,data:JSON.stringify(n)}],"json",function(e,n,r,i){try{"string"!=typeof n&&(n=JSON.stringify(n)),n=n.replace(/&quot;/g,'"'),n=n.replace(/\\|^"|"$/g,""),o=JSON.parse(n)}catch(e){o={err:a.makeErrorObject("doOperation1","Invalid JSON received.","SpaceifyNetwork::doOperation")}}o.err?c=o.err:o.error&&(c=o.error),t(c,o.data,r,i)})}catch(e){t(e,null)}};var s=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},f=function(e,n,t,o){4==e.readyState&&o(200!=e.status?e.status:null,200==e.status?e.response:null,n,Date.now()-t)};e.setCookie=function(e,n,t){var o="";if(t){var r=Date.now()+1e3*t,i=new Date(r);o="expires="+i.toGMTString()}document.cookie=e+"="+n+(""!=o?"; "+o:"")},e.getCookie=function(e){for(var n=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var r=t[o];" "==r.charAt(0);)r=r.substring(1);if(r.indexOf(n)!=-1)return r.substring(n.length,r.length)}return""},e.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"}}e.exports=o},function(e,n,t){function o(){var e=this;e.getUniqueDirectory=function(e,n){return e=e.toLowerCase(),e=e.replace(/[^a-z0-9\/_]/g,"/"),e=e.replace(/^\/+/,""),e+=e.search(/\/$/)!=-1?"":"/",n&&(e=e.replace(/\/$/,"")),e},e.getSystemctlServiceName=function(e){return e.replace(/_\//g,"")+".service"},e.getBasePath=function(e,n,t){return t.APP_TYPE_PATHS[e]},e.getAppPath=function(n,t,o){return o.APP_TYPE_PATHS[n]+e.getUniqueDirectory(t)+o.VOLUME_DIRECTORY+o.APPLICATION_DIRECTORY},e.getVolPath=function(n,t,o){return o.APP_TYPE_PATHS[n]+e.getUniqueDirectory(t)+o.VOLUME_DIRECTORY},e.getWwwPath=function(n,t,o){return e.getAppPath(n,t,o)+o.WWW_DIRECTORY}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=null,r=null,i=null,c=null,a=null;n?(o="/var/lib/spaceify/code/",r=t(26)(o+"logger"),i=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),c=t(2)(o+"spaceifyconfig"),a=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),global.os=t(59),global.fs=t(0),global.path=t(60),global.mkdirp=t(57),global.AdmZip=t(53),global.request=t(61),global.spawn=t(54).spawn):(o=window.spe?window.spe:window,r=o.Logger,i={},c=o.SpaceifyConfig,a=function(e){return e});var u=c.getConfig(),l=i,s=r.getLogger("SpaceifyUtility");e.loadRemoteFile=a(function(e){var n;try{n=request.sync.get(e,{encoding:null,rejectUnauthorized:!1,agent:!1})}catch(e){throw l.E_LOAD_REMOTE_FILE_FAILED_TO_INITIATE_HTTP_GET.pre("SpaceifyUtility::loadRemoteFile",e)}if(200!=n.statusCode)throw l.E_LOAD_REMOTE_FILE_FAILED_TO_LOAD_REMOTE_FILE.preFmt("SpaceifyUtility::loadRemoteFile",{"~file":e,"~code":n.statusCode});return n}),e.loadRemoteFileToLocalFile=a(function(n,t,o,r){try{var i=e.sync.loadRemoteFile(n);return 200==i.statusCode&&e.sync.writeFile(t,o,i.body),!0}catch(e){if(r)throw l.E_LOAD_REMOTE_FILE_TO_LOCAL_FILE_FAILED.pre("SpaceifyUtility::loadRemoteFileToLocalFile",e)}return!1}),e.isLocal=a(function(e,n){try{var t=fs.sync.stat(e);if(t&&"file"==n&&t.isFile())return!0;if(t&&"directory"==n&&t.isDirectory())return!0}catch(e){}return!1}),e.getPathType=a(function(e){try{var n=fs.sync.stat(e);if(n&&n.isFile())return"file";if(n&&n.isDirectory())return"directory"}catch(e){}return"undefined"}),e.deleteDirectory=a(function(n,t){try{var o=fs.sync.stat(n);"undefined"!=typeof o&&o.isDirectory()&&(fs.sync.readdir(n).forEach(function(o,r){var i=n+"/"+o;fs.sync.stat(i).isDirectory()?e.sync.deleteDirectory(i,t):fs.sync.unlink(i)}),fs.sync.rmdir(n))}catch(e){if(t)throw l.E_DELETE_DIRECTORY_FAILED.pre("SpaceifyUtility::deleteDirectory",e)}}),e.copyDirectory=a(function(n,t,o,r){try{n+=n.search(/\/$/)!=-1?"":"/",t+=t.search(/\/$/)!=-1?"":"/";var i=fs.sync.stat(n);if("undefined"==typeof i||!i.isDirectory()||r.indexOf(n)!=-1)return;var c=parseInt("0"+(511&i.mode).toString(8),8);mkdirp.sync(t,c),fs.sync.readdir(n).forEach(function(a,u){var l=n+a,s=t+a;if(i=fs.sync.stat(l),i.isDirectory())e.sync.copyDirectory(l+"/",s+"/",o,r);else{c=parseInt("0"+(511&i.mode).toString(8),8);var f=fs.createReadStream(l,{autoClose:!0}),p=fs.createWriteStream(s,{mode:c});f.pipe(p)}})}catch(e){if(o)throw l.E_COPY_DIRECTORY_FAILED.pre("SpaceifyUtility::copyDirectory",e)}}),e.moveDirectory=a(function(n,t,o){try{e.sync.copyDirectory(n,t,!0,[]),e.sync.deleteDirectory(n,!0)}catch(e){if(o)throw l.E_MOVE_DIRECTORY_FAILED.pre("SpaceifyUtility::moveDirectory",e)}}),e.deleteFile=a(function(e,n){try{var t=fs.sync.stat(e);"undefined"==typeof t||t.isDirectory()||fs.sync.unlink(e)}catch(e){if(n)throw l.E_DELETE_FILE_FAILED.pre("SpaceifyUtility::deleteFile",e)}}),e.copyFile=a(function(e,n,t){try{var o=fs.sync.stat(e);if("undefined"!=typeof o&&!o.isDirectory()){var r=parseInt("0"+(511&o.mode).toString(8),8),i=fs.createReadStream(e,{autoClose:!0}),c=fs.createWriteStream(n,{mode:r});i.pipe(c)}}catch(e){if(t)throw l.E_COPY_FILE_FAILED.pre("SpaceifyUtility::copyFile",e)}}),e.moveFile=a(function(n,t,o){try{e.sync.copyFile(n,t,!0),e.sync.deleteFile(n,!0)}catch(e){if(o)throw l.E_MOVE_FILE_FAILED.pre("SpaceifyUtility::moveFile",e)}}),e.zipDirectory=a(function(n,t){n+=""!=n&&n.search(/\/$/)==-1?"/":"";try{e.execute.sync("zip",["-r","-q",t,".","-i","*"],{cwd:n},null)}catch(e){throw l.E_ZIP_DIRECTORY_FAILED.pre("SpaceifyUtility::zipDirectory",e)}}),e.getFileFromZip=function(n,t,o,r){var i=new RegExp(t+"$","i"),c=new AdmZip(n),a=c.getEntries();for(var u in a)if(a[u].entryName.search(i)!=-1)return o&&c.extractAllTo(o,!0),c.readAsText(a[u].entryName);return r&&e.sync.deleteFile(n),null},e.unZip=function(n,t,o){var r=new AdmZip(n);return r.extractAllTo(t,!0),o&&e.sync.deleteFile(n),!0},e.writeFile=a(function(e,n,t){mkdirp.sync(e),fs.sync.writeFile(e+n,t)}),e.preparePath=function(e){return e+(e.match(/^$/)||e.match(/\/$/)?"":"/")},e.postForm=a(function(e,n){var t;try{t=request.sync.post(e,n)}catch(e){throw l.E_POST_FORM_FAILED_TO_INITIATE_HTTP_POST.pre("SpaceifyUtility::postForm",e)}if(200!=t.statusCode)throw l.E_POST_FORM_FAILED_TO_POST_FORM.preFmt("SpaceifyUtility::postForm",{"~url":e,"~code":t.statusCode});return t}),e.postPublish=function(e,n,t,o,r){s.force(l.PACKAGE_POSTING),request({url:u.REGISTRY_PUBLISH_URL,headers:{"content-type":"multipart/form-data"},method:"POST",multipart:[{"Content-Disposition":'form-data; name="username"',body:n},{"Content-Disposition":'form-data; name="password"',body:t},{"Content-Disposition":'form-data; name="release"',body:o},{"Content-Disposition":'form-data; name="package"; filename="'+u.PUBLISH_ZIP+'"',"Content-Type":"application/zip",body:fs.readFileSync(e)}]},function(e,n,t){
r(e?e:null,e?null:200!=n.statusCode?n.statusCode:t)})},e.postRegister=function(e,n,t,o){request.post({url:u.EDGE_REGISTER_URL,headers:{"content-type":"multipart/form-data"},multipart:[{"Content-Disposition":'form-data; name="edge_id"',body:e},{"Content-Disposition":'form-data; name="edge_name"',body:n},{"Content-Disposition":'form-data; name="edge_password"',body:t}]},function(e,n,t){o(e?e:null,e?null:200!=n.statusCode?n.statusCode:t)})};e.parseURLFromURLObject=function(e,n,t,o){return e.hostname=n+(o?":"+o:""),e.protocol=t,e.format(e)},e.parseMultiPartData=function(n,t,o){var r,i,c,a,u,l,s={},f={};try{if(e.parseMultipartLine(n,s),!(r=s.boundary))throw"";for(i="--"+r,c="--"+r+"--",t=t.split("\r\n"),t.shift();t.length>0;){for(u=0,l={body:""},a=t.shift();t.length>0&&a!=i&&a!=c;)""==a?u++:0==u?e.parseMultipartLine(a,l):l.body+=a,a=t.shift();l.name&&(f[l.name]=l)}}catch(e){if(o)throw e}return f},e.parseMultipartLine=function(e,n){for(var t=e.split(";"),o=0;o<t.length;o++)if(t[o]){var r=t[o].match(/[:=]/);if(r){var i=t[o].substr(0,r.index),c=t[o].substr(r.index+1);n[i.trim().toLowerCase()]=c.trim()}else n[t[o].trim()]=""}},e.loadJSON=a(function(n,t,o){var r=null;try{r=fs.sync.readFile(n,{encoding:"utf8"}),t&&(r=e.parseJSON(r,o))}catch(e){if(r=null,o)throw l.E_LOAD_JSON_FAILED.pre("SpaceifyUtility::loadJSON",e)}return r}),e.saveJSON=a(function(e,n,t){var o=!1;try{var r=JSON.stringify(n,null,2);fs.sync.writeFile(e,r,{encoding:"utf8"}),o=!0}catch(e){if(t)throw l.E_SAVE_JSON_FAILED.pre("SpaceifyUtility::saveJSON",e)}return o}),e.parseJSON=function(t,o){var r;try{r=JSON.parse(t)}catch(t){if(o)throw n?l.E_PARSE_JSON_FAILED.pre("SpaceifyUtility::parseJSON",t):e.makeErrorObject("JSON","Failed to parse JSON.","SpaceifyUtility::parseJSON")}return r},e.replaces=function(e,n){for(var t=n.length-1;t>=0;t--){var o=new RegExp("%"+t,"g");e=e.replace(o,"undefined"==typeof n[t]?"?":n[t])}return e},e.replace=function(e,n,t){var o,r=t?t:"";for(o in n)"undefined"!=typeof n[o]&&(e=e.replace(o,n[o]));return e=e.replace(/\s~[a-zA-Z0-9]*\s/g," "+r+" "),e=e.replace(/~[a-zA-Z0-9]+\s/g," "+r+" "),e=e.replace(/\s~[a-zA-Z0-9]+/g,r),e=e.replace(/~[a-zA-Z0-9]+/g,r)},e.execute=function(e,n,t,o,r){var i=!1,c="",a="",u=spawn(e,n,t);u.stdout.on("data",function(e){o&&o(!1,e),c+=e}),u.stderr.on("data",function(e){o&&o(!0,e),a+=e}),u.on("error",function(e){i||(r(e,null),i=!0)}),u.on("close",function(e){i||(r(null,{code:e,signal:null,stdout:c,stderr:a}),i=!0)}),u.on("exit",function(e,n){i||(r(null,{code:e,signal:n,stdout:c,stderr:a}),i=!0)})},e.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.randomString=function(e,n){var t,o="";o=n?"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789":"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!�$#%&/(){}[]<>|��=+?*,.;:-_";var r="";for(t=e;t>0;--t)r+=o[Math.round(Math.random()*(o.length-1))];return r},e.generateRandomConnectionId=function(e){for(var n;;)if(n=Math.floor(4294967296*Math.random()),!e.hasOwnProperty(n))break;return n},e.bytesToHexString=function(e){for(var n=[],t=0;t<e.length;t++)n.push((e[t]>>>4).toString(16)),n.push((15&e[t]).toString(16));return n.join("")},e.getLocalDateTime=function(){var e;return e=new Date,e=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2)+" "+("00"+e.getHours()).slice(-2)+":"+("00"+e.getMinutes()).slice(-2)+":"+("00"+e.getSeconds()).slice(-2)},e.isObjectEmpty=function(e){return"object"!=typeof e||0==Object.keys(e).length},e.assoc=function(e,n,t){return n in e?e[n]=[t]:e[key].push(t),e},e.toBuffer=function(e){return e instanceof Buffer?e:e instanceof Array||e instanceof Object?new Buffer(JSON.stringify(e),"utf8"):"string"==typeof e?new Buffer(e,"utf8"):new Buffer(e.toString(),"utf8")},e.getApplicationIcon=function(e,n){var t=null;if(e&&e.images)for(var o=0;o<e.images.length;o++)if(e.images[o].file.search(!0)){t=(n?"/":"")+"images/"+("directory"in e.images[o]?e.images[o].directory+"/":"")+e.images[o].file;break}return t}}e.exports=o},function(e,n,t){"use strict";function o(e){var n=this,o="undefined"==typeof window,r=!(!o||"undefined"==typeof process.env.IS_REAL_SPACEIFY),i=null,c=null,a=null,u=null,l=null,s=null;o?(i="/var/lib/spaceify/code/",c=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),a=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),u=t(30)(i+"callbackbuffer"),l=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),s=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}()):(i=window.spe?window.spe:window,c=i.Logger,a=i.SpaceifyError,u=i.CallbackBuffer,l=i.SpaceifyUtility,s=function(e){return e});var f=new a,p=new l,d=new u,g=c.getLogger("BinaryRpcCommunicator"),y=1,w={},h=null,m=[],v=[],S={},R=null,E=0,O=1,C="  REQUEST      -> ",b="  NOTIFICATION -> ",_="  RETURN VALUE <- ";n.exposeRpcMethod=function(e,n,t){try{w[e]={type:O,method:t}}catch(e){g.error(e,!0,!0,g.ERROR)}},n.exposeRpcMethodSync=function(e,n,t){try{w[e]={type:E,method:t}}catch(e){g.error(e,!0,!0,g.ERROR)}},n.setConnectionListener=function(e){"function"==typeof e&&m.push(e)},n.setDisconnectionListener=function(e){"function"==typeof e&&v.push(e)},n.setBinaryListener=function(e){h="function"==typeof e?e:null},n.connectionExists=function(e){return!("undefined"==typeof e||!S.hasOwnProperty(e))||!("undefined"!=typeof e||!S.hasOwnProperty(R))},n.getConnection=function(e){return S[e]},n.callRpc=function(e,t,o,r,i){var c,a,u=[],l=!1,s="undefined"!=typeof i?i:R;if(g.log("BinaryRpcCommunicator::callRpc() connectionId: "+i),n.connectionExists(i)){try{e instanceof Array||(l=!1,t=[t],e=[e]),a=y;for(var p=0;p<e.length;p++)c="function"==typeof r?{jsonrpc:"2.0",method:e[p],params:t[p],id:y++}:{jsonrpc:"2.0",method:e[p],params:t[p]},u.push(c);"function"==typeof r&&d.pushBack(a,o,r)}catch(e){return"function"==typeof r&&r(f.makeErrorObject(-32e3,"callRpc failed.","BinaryRpcCommunicator::callRpc"),null)}var w=l?u:u[0];A(w,s)}},n.notifyAll=function(e,n){try{for(var t in S)g.log("BinaryRpcCommunicator::notifyAll() sending message to "+t),A({jsonrpc:"2.0",method:e,params:n,id:null},t)}catch(e){g.error(e,!0,!0,g.ERROR)}},n.getBufferedAmount=function(e){return S[e].getBufferedAmount()},n.sendBinary=function(e,n){g.log("BinaryRpcCommunicator::sendBinary() "+e.byteLength);try{S[n].sendBinary(e)}catch(e){g.error(e,!0,!0,g.ERROR)}};var A=function(e,n){try{S[n].send(JSON.stringify(e))}catch(e){g.error(e,!0,!0,g.ERROR)}};n.sendMessage=A;var I=function(e,n){var t=!0;try{e instanceof Array||(e=[e],t=!1),e[0].method?(g.log("RpcCommunicator::handleRpcCall() connectionId: "+n),o&&!r?s.run(function(){P.sync(e,t,[],!0,n)},function(e,n){}):P(e,t,[],!0,n)):k(e,t)}catch(e){g.error(e,!0,!0,g.ERROR)}},P=function(e,n,t,o,i){var c,a=e.shift();if(a){var u=a.hasOwnProperty("id")?a.id:null,l=a.hasOwnProperty("params")?a.params:[];if(null!=u&&(o=!1),g.log((u?C:b)+JSON.stringify(a)),!a.jsonrpc||"2.0"!=a.jsonrpc||!a.method)return L(u,{jsonrpc:"2.0",error:{code:-32600,message:"The JSON sent is not a valid Request object."},id:null},t),P(e,n,t,o,i);if("undefined"!==l&&l.constructor!==Array)return L(u,{jsonrpc:"2.0",error:{code:-32602,message:"Invalid method parameter(s). Parameters must be placed inside an array."},id:u},t),P(e,n,t,o,i);if(!w.hasOwnProperty(a.method))return L(u,{jsonrpc:"2.0",error:{code:-32601,message:"The method does not exist / is not available: "+a.method+"."},id:u},t),P(e,n,t,o,i);try{var s=w[a.method],f=l.length,p=s.type==E?(r?s.method.length:s.method.getLength())-1:s.method.length-2;if(p<f)l.splice(p-f,f-p);else if(p>f)for(p-=f;p--;)l.push(null);var d={requestId:u,connectionId:i,isSecure:S[i].getIsSecure()};r||(d.origin=S[i].getOrigin(),d.remotePort=S[i].getRemotePort(),d.remoteAddress=S[i].getRemoteAddress()),s.type!=E||r?s.type==E&&r?(l.push(d),c=s.method.apply(s.object,l),L(u,c,t),P(e,n,t,o,i)):null!=u?(l.push(d,function(r,c){T(r,c,u,e,n,t,o,i)}),s.method.apply(s.object,l)):(l.push(d),s.method.apply(s.object,l),P(e,n,t,o,i)):(l.push(d),c=s.method.sync.apply(s.object,l),L(u,c,t),P(e,n,t,o,i))}catch(r){D(u,r,t),P(e,n,t,o,i)}}else o||0!=t.length||t.push({jsonrpc:"2.0",error:{code:-32603,message:"Internal JSON-RPC error."},id:null}),t.length>0&&A(n?t:t[0],i)},T=function(e,n,t,o,r,i,c,a){e?(D(t,e,i),P(o,r,i,c,a)):(L(t,n,i),P(o,r,i,c,a))},L=function(e,n,t){null!=e&&(n="undefined"==typeof n?null:n,g.log("  RESPONSE <- "+JSON.stringify(n)),t.push({jsonrpc:"2.0",result:n,id:e}))},D=function(e,n,t){null!=e&&(n=f.make(n),g.log("  ERROR RESPONSE <- "+JSON.stringify(n)),t.push({jsonrpc:"2.0",error:n,id:e}))},k=function(e,n){g.log("BinaryRpcCommunicator::handleReturnValue()");var t=null,o=null;try{if(n){var r=N(e);d.callMethodAndPop(r.smallestId,r.errors,r.results)}else{if(g.log(_+JSON.stringify(e[0])),!e[0].jsonrpc||"2.0"!=e[0].jsonrpc||!e[0].id||e[0].result&&e[0].error)return;e[0].hasOwnProperty("error")?(t=e[0].error,o=null):e[0].hasOwnProperty("result")&&(t=null,o=e[0].result),d.callMethodAndPop(e[0].id,t,o)}}catch(e){g.error(e,!0,!0,g.ERROR)}},N=function(e){for(var n=-1,t={},o={},r=0;r<e.length;r++)g.log(_+JSON.stringify(e[r])),!e[r].jsonrpc||"2.0"!=e[r].jsonrpc||!e[r].id||e[r].result&&e[r].error||(n=Math.max(n,e[r].id),e[r].hasOwnProperty("error")?(t[e[r].id]=e[r].error,o[e[r].id]=null):e[r].hasOwnProperty("result")&&(t[e[r].id]=null,o[e[r].id]=o[r].result));return{smallestId:n,errors:t,results:o}},e=function(e,n){var t=new DataView(e),o=new Uint8Array(e),r=(t.getUint32(4),t.getUint32(8),t.getUint32(12)),i=o.subarray(16,16+r),c=(String.fromCharCode.apply(null,i),t.getUint32(16+r)),a=o.subarray(16+r+4,16+r+4+c),u=(String.fromCharCode.apply(null,a),t.getUint32(16+r+4+c+4));o.subarray(16+r+4+c+4+4,16+r+4+c+4+4+u)};n.setupPipe=function(e,n){g.log("BinaryRpcCommunicator::setupPipe() between: "+e+" and "+n),S.hasOwnProperty(e)&&S.hasOwnProperty(n)&&(S[e].setPipedTo(n),S[n].setPipedTo(e))},n.onMessage=function(n,t){try{var o=t.getPipedTo();if(null!=o)return void S[o].send(n);if(n instanceof ArrayBuffer)return void e(n,t.getId());try{n=JSON.parse(n),I(n,t.getId())}catch(e){A({jsonrpc:"2.0",error:{code:-32700,message:"Invalid JSON."},id:null},t.getId())}}catch(e){g.error(e,!0,!0,g.ERROR)}},n.addConnection=function(e){try{e.getId()||e.setId(p.generateRandomConnectionId(S)),S[e.getId()]=e,e.setEventListener(n);for(var t=0;t<m.length;t++)m[t](e.getId());return R=e.getId(),e.getId()}catch(e){g.error(e,!0,!0,g.ERROR)}},n.onDisconnected=function(e){try{n.closeConnection(e);for(var t=0;t<v.length;t++)v[t](e)}catch(e){g.error(e,!0,!0,g.ERROR)}},n.closeConnection=function(e){try{e in S&&(S[e].close(),delete S[e])}catch(e){g.error(e,!0,!0,g.ERROR)}},n.setOptions=function(e){g&&e.logger&&g.clone(e.logger)}}e.exports=o},function(e,n,t){"use strict";function o(e){var n=this,t=new Object;n.pushBack=function(e,n,o){t[e]=[n,o,Date.now()]},n.callMethodAndPop=function(e,n,o){if(!t.hasOwnProperty(e))throw{error:"CallbackBuffer::callMethodAndPop(). Callback not found"};t[e][1].call(t[e][0],n,o,e,Date.now()-t[e][2]),delete t[e]}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=!(!n||"undefined"==typeof process.env.IS_REAL_SPACEIFY),r=null,i=null,c=null,a=null,u=null,l=null;n?(r="/var/lib/spaceify/code/",i=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),c=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),a=t(30)(r+"callbackbuffer"),u=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),l=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}()):(r=window.spe?window.spe:window,i=r.Logger,c=r.SpaceifyError,a=r.CallbackBuffer,u=r.SpaceifyUtility,l=function(e){return e});var s=new c,f=new u,p=new a,d=i.getLogger("RpcCommunicator"),g=1,y={},w=null,h=[],m=[],v={},S=null,R=0,E=1,O="  REQUEST      -> ",C="  NOTIFICATION -> ",b="  RETURN VALUE <- ";e.exposeRpcMethod=function(e,n,t){try{y[e]={type:E,method:t}}catch(e){d.error(e,!0,!0,d.ERROR)}},e.exposeRpcMethodSync=function(e,n,t){try{y[e]={type:R,method:t}}catch(e){d.error(e,!0,!0,d.ERROR)}},e.setConnectionListener=function(e){"function"==typeof e&&h.push(e)},e.setDisconnectionListener=function(e){"function"==typeof e&&m.push(e)},e.setBinaryListener=function(e){w="function"==typeof e?e:null},e.connectionExists=function(e){return!("undefined"==typeof e||!v.hasOwnProperty(e))||!("undefined"!=typeof e||!v.hasOwnProperty(S))},e.getConnection=function(e){return v[e]},e.callRpc=function(n,t,o,r,i){var c,a,u=[],l=!1,f="undefined"!=typeof i?i:S;if(d.log("RpcCommunicator::callRpc() connectionId: "+i),e.connectionExists(i)){try{n instanceof Array||(l=!1,t=[t],n=[n]),a=g;for(var y=0;y<n.length;y++)c="function"==typeof r?{jsonrpc:"2.0",method:n[y],params:t[y],id:g++}:{jsonrpc:"2.0",method:n[y],params:t[y]},u.push(c);"function"==typeof r&&p.pushBack(a,o,r)}catch(e){return"function"==typeof r&&r(s.makeErrorObject(-32e3,"callRpc failed.","RpcCommunicator::callRpc"),null)}var w=l?u:u[0];_(w,f)}},e.notifyAll=function(e,n){try{for(var t in v)d.log("RpcCommunicator::notifyAll() sending message to "+t),_({jsonrpc:"2.0",method:e,params:n,id:null},t)}catch(e){d.error(e,!0,!0,d.ERROR)}},e.getBufferedAmount=function(e){return v[e].getBufferedAmount()},e.sendBinary=function(e,n){d.log("RPCCommunicator::sendBinary() "+e.byteLength);try{v[n].sendBinary(e)}catch(e){d.error(e,!0,!0,d.ERROR)}};var _=function(e,n){try{v[n].send(JSON.stringify(e))}catch(e){d.error(e,!0,!0,d.ERROR)}};e.sendMessage=_;var A=function(e,t){var r=!0;try{e instanceof Array||(e=[e],r=!1),e[0].method?(d.log("RpcCommunicator::handleRpcCall() connectionId: "+t),n&&!o?l.run(function(){I.sync(e,r,[],!0,t)},function(e,n){}):I(e,r,[],!0,t)):D(e,r)}catch(e){d.error(e,!0,!0,d.ERROR)}},I=function(e,n,t,r,i){var c,a=e.shift();if(a){var u=a.hasOwnProperty("id")?a.id:null,l=a.hasOwnProperty("params")?a.params:[];if(null!=u&&(r=!1),d.log((u?O:C)+JSON.stringify(a)),!a.jsonrpc||"2.0"!=a.jsonrpc||!a.method)return T(u,{jsonrpc:"2.0",error:{code:-32600,message:"The JSON sent is not a valid Request object."},id:null},t),I(e,n,t,r,i);if("undefined"!==l&&l.constructor!==Array)return T(u,{jsonrpc:"2.0",error:{code:-32602,message:"Invalid method parameter(s). Parameters must be placed inside an array."},id:u},t),I(e,n,t,r,i);if(!y.hasOwnProperty(a.method))return T(u,{jsonrpc:"2.0",error:{code:-32601,message:"The method does not exist / is not available: "+a.method+"."},id:u},t),I(e,n,t,r,i);try{var s=y[a.method],f=l.length,p=s.type==R?(o?s.method.length:s.method.getLength())-1:s.method.length-2;if(p<f)l.splice(p-f,f-p);else if(p>f)for(p-=f;p--;)l.push(null);var g={requestId:u,connectionId:i,isSecure:v[i].getIsSecure()};o||(g.origin=v[i].getOrigin(),g.remotePort=v[i].getRemotePort(),g.remoteAddress=v[i].getRemoteAddress()),s.type!=R||o?s.type==R&&o?(l.push(g),c=s.method.apply(s.object,l),T(u,c,t),I(e,n,t,r,i)):null!=u?(l.push(g,function(o,c){P(o,c,u,e,n,t,r,i)}),s.method.apply(s.object,l)):(l.push(g),s.method.apply(s.object,l),I(e,n,t,r,i)):(l.push(g),c=s.method.sync.apply(s.object,l),T(u,c,t),I(e,n,t,r,i))}catch(o){L(u,o,t),I(e,n,t,r,i)}}else r||0!=t.length||t.push({jsonrpc:"2.0",error:{code:-32603,message:"Internal JSON-RPC error."},id:null}),t.length>0&&_(n?t:t[0],i)},P=function(e,n,t,o,r,i,c,a){e?(L(t,e,i),I(o,r,i,c,a)):(T(t,n,i),I(o,r,i,c,a))},T=function(e,n,t){null!=e&&(n="undefined"==typeof n?null:n,d.log("  RESPONSE <- "+JSON.stringify(n)),t.push({jsonrpc:"2.0",result:n,id:e}))},L=function(e,n,t){null!=e&&(n=s.make(n),d.log("  ERROR RESPONSE <- "+JSON.stringify(n)),t.push({jsonrpc:"2.0",error:n,id:e}))},D=function(e,n){d.log("RpcCommunicator::handleReturnValue()");var t=null,o=null;try{if(n){var r=k(e);p.callMethodAndPop(r.smallestId,r.errors,r.results)}else{if(d.log(b+JSON.stringify(e[0])),!e[0].jsonrpc||"2.0"!=e[0].jsonrpc||!e[0].id||e[0].result&&e[0].error)return;e[0].hasOwnProperty("error")?(t=e[0].error,o=null):e[0].hasOwnProperty("result")&&(t=null,o=e[0].result),p.callMethodAndPop(e[0].id,t,o)}}catch(e){d.error(e,!0,!0,d.ERROR)}},k=function(e){for(var n=-1,t={},o={},r=0;r<e.length;r++)d.log(b+JSON.stringify(e[r])),!e[r].jsonrpc||"2.0"!=e[r].jsonrpc||!e[r].id||e[r].result&&e[r].error||(n=Math.max(n,e[r].id),e[r].hasOwnProperty("error")?(t[e[r].id]=e[r].error,o[e[r].id]=null):e[r].hasOwnProperty("result")&&(t[e[r].id]=null,o[e[r].id]=o[r].result));return{smallestId:n,errors:t,results:o}};e.setupPipe=function(e,n){d.log("RpcCommunicator::setupPipe() between: "+e+" and "+n),v.hasOwnProperty(e)&&v.hasOwnProperty(n)&&(v[e].setPipedTo(n),v[n].setPipedTo(e))},e.onMessage=function(e,n){try{var t=n.getPipedTo();if(null!=t)return void v[t].send(e);if(e instanceof ArrayBuffer)return void("function"==typeof w&&w.onBinary(e,n.getId()));try{e=JSON.parse(e),A(e,n.getId())}catch(e){_({jsonrpc:"2.0",error:{code:-32700,message:"Invalid JSON."},id:null},n.getId())}}catch(e){d.error(e,!0,!0,d.ERROR)}},e.addConnection=function(n){try{n.getId()||n.setId(f.generateRandomConnectionId(v)),v[n.getId()]=n,n.setEventListener(e);for(var t=0;t<h.length;t++)h[t](n.getId());return S=n.getId(),n.getId()}catch(e){d.error(e,!0,!0,d.ERROR)}},e.onDisconnected=function(n){try{e.closeConnection(n);for(var t=0;t<m.length;t++)m[t](n)}catch(e){d.error(e,!0,!0,d.ERROR)}},e.closeConnection=function(e){try{e in v&&(v[e].close(),delete v[e])}catch(e){d.error(e,!0,!0,d.ERROR)}},e.setOptions=function(e){d&&e.logger&&d.clone(e.logger)}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=null,r=null,i=null;n?(o="/var/lib/spaceify/code/",r=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),i=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),global.fs=t(0),global.WebSocket=t(32).w3cwebsocket):(o=window.spe?window.spe:window,r=o.Logger,i=o.SpaceifyError);var c=new i,a=r.getLogger("WebSocketConnection"),u="",l=null,s=null,f=null,p=null,d=null,g=!1,y=!1,w=null,h=null,m=null;e.connect=function(t,o){l=t.id||null,s=t.port||"",y=t.isSecure||!1;var r=t.caCrt||"",i=t.hostname||null,p=y?"wss":"ws";t.subprotocol||"json-rpc";t.logger&&a.clone(t.logger);try{u=p+"://"+i+(s?":"+s:"")+(l?"?id="+l:"");var d=n&&y?{tlsOptions:{ca:[fs.readFileSync(r,"utf8")]}}:null;f=new WebSocket(u,"json-rpc",null,null,null,d),f.binaryType="arraybuffer",f.onopen=function(){a.log("WebSocketConnection::onOpen() "+u),g=!0,o(null,!0)},f.onerror=function(e){a.error("WebSocketConnection::onError() "+u,!0,!0,a.ERROR),g=!1,o(c.makeErrorObject("wsc","Failed to open WebsocketConnection.","WebSocketConnection::connect"),null)},f.onclose=function(n,t){R(n,t,e)},f.onmessage=S}catch(e){o(e,null)}},e.setSocket=function(n){try{f=n,f.on("message",v),f.on("close",function(n,t){R(n,t,e)}),g=!0}catch(e){a.error(e,!0,!0,a.ERROR)}},e.setId=function(e){l=e},e.setPipedTo=function(e){d=e},e.setRemoteAddress=function(e){h=e},e.setRemotePort=function(e){w=e},e.setOrigin=function(e){p=e},e.setIsSecure=function(e){y=e},e.setEventListener=function(e){m=e},e.getId=function(){return l},e.getRemoteAddress=function(){return h},e.getRemotePort=function(){return w},e.getOrigin=function(){return p},e.getIsSecure=function(){return y},e.getPipedTo=function(){return d},e.getIsOpen=function(){return g},e.getPort=function(){return s};var v=function(n){try{m&&("utf8"==n.type&&m.onMessage(n.utf8Data,e),"binary"==n.type&&m.onMessage(n.binaryData,e))}catch(e){a.error(e,!0,!0,a.ERROR)}},S=function(n){try{m&&m.onMessage(n.data,e)}catch(e){a.error(e,!0,!0,a.ERROR)}},R=function(e,n,t){a.log("WebSocketConnection::onSocketClosed() "+u);try{g=!1,m&&m.onDisconnected(t.getId())}catch(e){a.error(e,!0,!0,a.ERROR)}};e.send=function(e){try{f.send(e)}catch(e){a.error(e,!0,!0,a.ERROR)}},e.sendBinary=e.send,e.close=function(){try{f.close()}catch(e){a.error(e,!0,!0,a.ERROR)}}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=null,r=null,i=null,c=null,a=null;n?(o="/var/lib/spaceify/code/",r=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),i=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),c=t(9)(o+"rpccommunicator"),a=t(11)(o+"websocketconnection")):(o=window.spe?window.spe:window,r=o.SpaceifyError,i=o.SpaceifyUtility,c=o.RpcCommunicator,a=o.WebSocketConnection);var u=new r,l=(new i,new c),s=new a;e.connect=function(e,n){s.connect(e,function(t,o){t?n&&n(u.makeErrorObject("wsrpcc","Failed to open WebsocketRpcConnection.","WebSocketRpcConnection::connect"),null):(l.addConnection(s),e.logger&&l.setOptions({logger:e.logger}),n&&n(null,!0))})},e.close=function(){},e.getCommunicator=function(){return l},e.getConnection=function(){return s},e.exposeRpcMethod=function(e,n,t){l.exposeRpcMethod(e,n,t)},e.exposeRpcMethodSync=function(e,n,t){l.exposeRpcMethodSync(e,n,t)},e.callRpc=function(e,n,t,o){return l.callRpc(e,n,t,o,s.getId())},e.getIsOpen=function(){return s.getIsOpen()},e.getIsSecure=function(){return s.getIsSecure()},e.getPort=function(){return s.getPort()},e.getId=function(){return s.getId()},e.setConnectionListener=function(e){l.setConnectionListener(e)},e.setDisconnectionListener=function(e){l.setDisconnectionListener(e)}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=null,r=null,i=null;n?(o="/var/lib/spaceify/code/",r=t(9)(o+"rpccommunicator"),i=t(52)(o+"websocketserver")):(o=window.spe?window.spe:window,r=window.RpcCommunicator,i=window.WebSocketServer);var c=new r,a=new i;a.setEventListener(c);var u=null,l=null;e.listen=function(e,n){c.setConnectionListener(s),c.setDisconnectionListener(f),e.logger&&c.setOptions({logger:e.logger});try{a.listen(e,n)}catch(e){}},e.close=function(){a.close()},e.getCommunicator=function(){return c},e.getServer=function(){return a},e.getPort=function(){return a.getPort()},e.getIsOpen=function(){return a.getIsOpen()},e.getIsSecure=function(){return a.getIsSecure()},e.getId=function(){return a.getId()},e.exposeRpcMethod=function(e,n,t){c.exposeRpcMethod(e,n,t)},e.exposeRpcMethodSync=function(e,n,t){c.exposeRpcMethodSync(e,n,t)},e.nofifyAll=function(e,n){c.nofifyAll(e,n)},e.callRpc=function(){c.callRpc.apply(this,arguments)},e.closeConnection=function(e){c.closeConnection(e)},e.setConnectionListener=function(e){u="function"==typeof e?e:null},e.setDisconnectionListener=function(e){l="function"==typeof e?e:null},e.setServerUpListener=function(e){a.setServerUpListener("function"==typeof e?e:null)},e.setServerDownListener=function(e){a.setServerDownListener("function"==typeof e?e:null)};var s=function(n){"function"==typeof u&&u(n,e.getId(),e.getIsSecure())},f=function(n){"function"==typeof l&&l(n,e.getId(),e.getIsSecure())}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n="undefined"==typeof window,o=null,r=null,i=null,c=null,a=null;n?(o="/var/lib/spaceify/code/",r=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),i=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),c=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),a=t(11)(o+"websocketconnection"),global.fs=t(0),global.URL=t(62),global.http=t(55),global.https=t(56),global.WSServer=t(32).server):(o=window.spe?window.spe:window,r=window.Logger,i=window.SpaceifyConfig,c=window.SpaceifyUtility,a=window.WebSocketConnection);var u=new c,l=i.getConfig(),s=r.getLogger("WebSocketServer"),f={},p=!1,d=null,g=null,y=null,w=null,h=null,m=null;e.listen=function(e,n){try{if("id"in f||(f.hostname=e.hostname||null,f.port=e.port||0,f.key=e.key||"",f.crt=e.crt||"",f.caCrt=e.caCrt||"",f.isSecure=e.isSecure||!1,f.keepUp=e.keepUp||"",f.protocol=f.isSecure?"wss":"ws",f.subprotocol=e.subprotocol||"json-rpc",f.id=e.id||u.generateRandomConnectionId({})),s.log(u.replace("WebSocketServer::listen() protocol: ~pr, subprotocol: ~s, hostname: ~h, port: ~po",{"~pr":f.protocol,"~s":f.subprotocol,"~h":f.hostname,"~po":f.port})),p=!1,f.isSecure){var t=fs.readFileSync(f.key),o=fs.readFileSync(f.crt),r=fs.readFileSync(f.caCrt,"utf8");y=https.createServer({key:t,cert:o,ca:r},function(e,n){n.writeHead(501),n.end("Not implemented")})}else y=http.createServer(function(e,n){n.writeHead(501),n.end("Not implemented")});y.listen(f.port,f.hostname,511,function(){f.port=y.address().port,v(),"function"==typeof n&&n(null,!0)}),y.on("error",function(e){s.error("WebSocketServer::onError()",!0,!0,s.ERROR),S(),"function"==typeof n&&n(e,null)}),y.on("close",function(){S()}),g=new WSServer({httpServer:y,autoAcceptConnections:!1,keepalive:!0,keepaliveInterval:6e4,dropConnectionOnKeepaliveTimeout:!0,keepaliveGracePeriod:1e4}),g.on("request",function(e){try{var n=new a;n.setSocket(e.accept(f.subprotocol,e.origin)),n.setRemoteAddress(e.remoteAddress),n.setRemotePort(e.remotePort),n.setOrigin(e.origin),n.setIsSecure(f.isSecure);var t=URL.parse(e.resourceURL,!0).query;t&&t.id&&n.setId(t.id),w.addConnection(n),s.log(u.replace("WebSocketServer::request(~lp) protocol: ~p, remoteAddress: ~ra, remotePort: ~rp, origin: ~o, id: ~i",{"~lp":f.port,"~p":f.protocol,"~ra":e.remoteAddress,"~rp":e.remotePort,"~o":e.origin,"~i":n.getId()},"-"))}catch(e){return void s.error(e,!0,!0,s.ERROR)}}),g.on("connect",function(e){}),g.on("close",function(e,n,t){})}catch(e){s.error(e,!0,!0,s.ERROR)}},e.close=function(){try{s.log(u.replace("WebSocketServer::close() protocol: :pr, subprotocol: :s, hostname: :h, port: :po",{":pr":f.protocol,":s":f.subprotocol,":h":f.hostname,":po":f.port})),p=!0,g&&(g.shutDown(),g=null),y&&(y.close(),y=null)}catch(e){s.error(e,!0,!0,s.ERROR)}},e.getPort=function(){return f.port},e.getIsOpen=function(){return!(!y||!g)},e.getIsSecure=function(){return f.isSecure},e.getId=function(){return f.id},e.setEventListener=function(e){w=e};var v=function(){h&&h(f.id)},S=function(){m&&m(f.id),f.keepUp&&null==d&&!p&&(d=setTimeout(function(){d=null,e.listen(f,null)},l.RECONNECT_WAIT))};e.setServerUpListener=function(e){h="function"==typeof e?e:null},e.setServerDownListener=function(e){m="function"==typeof e?e:null}}e.exports=o},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./logger":12};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=26},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./spaceifycore":15};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=27},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./spaceifyerror":6};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=28},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./webjsonrpc/websocketrpcconnection":23};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=29},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./callbackbuffer":20};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=30},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=31},function(e,t){e.exports=n},function(e,n,t){"use strict";function o(){var e="undefined"==typeof window,n=!(!e||"undefined"==typeof process.env.IS_REAL_SPACEIFY),o=null,r=null,i=null,c=null,a=null,u=null,l=null,s=null;e?(o="/var/lib/spaceify/code/",r=t(26)(o+"logger"),i=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),c=t(27)(o+"spaceifycore"),a=t(2)(o+"spaceifyconfig"),u=t(8)(o+"spaceifyutility"),l=t(47)(o+"spaceifyservice"),s=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}()):(o=window.spe?window.spe:window,r=o.Logger,i=function(){},c=o.SpaceifyCore,a=o.SpaceifyConfig,u=o.SpaceifyUtility,l=o.SpaceifyService,s=function(e){return e});var f=this,p=new i,d=new i,g=new u,y=new c,w=new l,h=a.getConfig("realpaths"),m=r.getLogger("SpaceifyApplication"),v=null,S=null,R=n?80:null,E=n?443:null;f.start=function(){e?O.apply(f,arguments):f.connect.apply(f,arguments)};var O=function(e,t){s.run(function(){var o,r,i,c,a,u=!1,l=!1,s=!0,f=!0;S=e,t=t||{},a=!(!t.webservers&&!t.webServers),a&&(o=t.webservers||t.webServers,u="http"in o&&o.http,l="https"in o&&o.https),(t.websocketservers||t.webSocketServers)&&(o=t.websocketservers||t.webSocketServers,s="secure"in o&&o.secure,f="unsecure"in o&&o.unsecure);try{if(v=g.sync.loadJSON(h.VOLUME_APPLICATION_PATH+h.MANIFEST,!0,!0),v.provides_services)for(var m=v.provides_services,O=0;O<m.length;O++)m.service_type!=h.ALIEN&&(r=n?h.FIRST_SERVICE_PORT+O:null,i=n?h.FIRST_SERVICE_PORT_SECURE+O:null,w.sync.listen(m[O].service_name,v.unique_name,r,i,f,s));if(v.requires_services&&(A.sync(v.requires_services,0,!1),A.sync(v.requires_services,0,!0)),a){var C={hostname:h.ALL_IPV4_LOCAL,key:h.VOLUME_TLS_PATH+h.SERVER_KEY,crt:h.VOLUME_TLS_PATH+h.SERVER_CRT,caCrt:h.API_WWW_PATH+h.SPACEIFY_CRT,wwwPath:h.VOLUME_APPLICATION_WWW_PATH,indexFile:h.INDEX_FILE,serverName:v.name+" Server"};c=!1,u&&!p.getIsOpen()&&(C.isSecure=!1,C.port=R,C.mappedPort=n?process.env.PORT_80:null,p.setSessionManager(null,h.SESSION_TOKEN_NAME),p.listen.sync(C),R=p.getPort(),c=!0),l&&!d.getIsOpen()&&(C.isSecure=!0,C.port=E,C.mappedPort=n?process.env.PORT_443:null,d.setSessionManager(null,h.SESSION_TOKEN_NAME),d.listen.sync(C),E=d.getPort(),c=!0),c&&!n&&(y.sync.registerService("http",{unique_name:v.unique_name,port:R,securePort:E}),console.log("    LISTEN -----> "+h.HTTP+" - port: "+R+", secure port: "+E))}S&&S.start&&"function"==typeof S.start&&S.start(),console.log(h.APPLICATION_INITIALIZED,"---",v.unique_name)}catch(e){b.sync(e)}},function(e,n){})};f.connect=function(e,n,t){try{S=e,n.constructor!==Array&&(n=[n]),y.getOpenServices(n,!1,function(e,n){if(e)throw e;C(S,n)})}catch(e){"function"==typeof S?S(e,!1):S&&S.fail&&"function"==typeof S.fail&&S.fail(e)}};var C=function(e,n){var t=n.shift();return S=e,"undefined"==typeof t?void("function"==typeof S?S(null,!0):S&&S.start&&"function"==typeof S.start&&S.start()):void w.connect(t.service_name,function(e,t){C(S,n)})},b=s(function(e){m.error([";;",e,"::"],!0,!0,m.ERROR),console.log(v.unique_name+h.APPLICATION_UNINITIALIZED),_.sync(e)}),_=s(function(e){p.close(),d.close(),w.disconnect(),w.close(),y.close(),S&&S.fail&&"function"==typeof S.fail&&S.fail(e)}),A=function(e,n,t,o){n==e.length?o():w.connect(e[n++].service_name,t,function(r,i){A(e,n,t,o)})};f.getOwnUrl=function(n){if(!e)return null;var t=(n?"https://":"http://")+h.EDGE_HOSTNAME+":"+(n?E:R);return t},f.getManifest=function(){return v},f.getRequiredService=function(e){return w.getRequiredService(e)},f.getRequiredServiceSecure=function(e){return w.getRequiredServiceSecure(e)},f.getProvidedService=function(e){return w.getProvidedService(e)},f.getProvidedServiceSecure=function(e){return w.getProvidedServiceSecure(e)}}e.exports="undefined"==typeof window?new o:o},function(e,n,t){"use strict";function o(){var e,n=this,t=window.spe?window.spe:window,o=new t.SpaceifyError,r=new t.SpaceifyNetwork,i=new t.SpaceifyUtility,c=t.SpaceifyConfig.getConfig(),a=new t.SpaceifyMessages,u=[],l=0,s=null,f=null;n.installApplication=function(e,n,t,o,r,i){p("installApplication",{package:e,username:n,password:t,force:o},r,i,!0)},n.removeApplication=function(e,n,t){p("removeApplication",{unique_name:e},n,t,!0)},n.purgeApplication=function(e,n,t){p("purgeApplication",{unique_name:e},n,t,!0)},n.startApplication=function(e,n,t){p("startApplication",{unique_name:e},n,t,!0);
},n.stopApplication=function(e,n,t){p("stopApplication",{unique_name:e},n,t,!0)},n.restartApplication=function(e,n,t){p("restartApplication",{unique_name:e},n,t,!0)},n.logIn=function(e,n,t){p("logIn",{password:e},n,t,!1)},n.logOut=function(e,n){p("logOut",{},e,n,!1)},n.isAdminLoggedIn=function(e,n){p("isAdminLoggedIn",{},e,n,!0)},n.getCoreSettings=function(e,n){p("getCoreSettings",{},e,n,!0)},n.saveCoreSettings=function(e,n,t){p("saveCoreSettings",{settings:e},n,t,!0)},n.getEdgeSettings=function(e,n){p("getEdgeSettings",{},e,n,!0)},n.saveEdgeSettings=function(e,n,t){p("saveEdgeSettings",{settings:e},n,t,!0)},n.getServiceRuntimeStates=function(e,n){p("getServiceRuntimeStates",{},e,n,!0)},n.getApplications=function(e,n,t){p("getApplications",{types:e},n,t,!0)},n.appStoreGetPackages=function(e,n){var e=JSON.stringify(e),t='Content-Disposition: form-data; name="search";\r\nContent-Type: plain/text; charset=utf-8';r.POST_FORM(c.EDGE_APPSTORE_GET_PACKAGES_URL,[{content:t,data:e}],"application/json",function(e,t){var e=null,r=null;try{t=t.replace(/&quot;/g,'"'),t=t.replace(/\\|^"|"$/g,""),r=JSON.parse(t),r.error&&(e=r.error,r=null)}catch(n){e=o.makeErrorObject("JSON","Failed to get packages: JSON.parse failed","SpaceifyApplicationManager::appStoreGetPackages")}n(e,r)})};var p=function(n,t,o,r,c){var a={type:n,params:t,origin:o,handler:r,getMessages:c,ms:Date.now(),id:i.randomString(16,!0)};0==u.length?(e=a,d()):u.push(a)},d=function(){e.getMessages?a.connect(n,e.origin):n.connected()};n.connected=function(){l=1;var t={type:e.type};for(var o in e.params)t[o]=e.params[o];r.doOperation(t,function(e,t){s=e,f=t,n.end(1)})},n.fail=function(e){s=e,f=null,n.end(2)},n.end=function(n){if(n+=n,2==n){var t=a.getErrors();s||t.length>0?e.origin.error(s?[s]:t,e.id,Date.now()-e.ms):"function"==typeof e.handler&&e.handler(f,e.id,Date.now()-e.ms),u.length>0&&(e=u.shift(),d())}},n.answer=function(e,n){a.answer(e,n)}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n={},t=6e4,o=SpaceifyConfig.getConfig();e.setApplication=function(e){n[e.unique_name]||(n[e.unique_name]={}),n[e.unique_name].manifest=e,n[e.unique_name].isRunning=e.isRunning},e.getApplication=function(e){return e in n?n[e]:null},e.setService=function(e,t){e.service_type==o.HTTP&&(n[t]||(n[t]={}),n[t].services||(n[t].services=[]),n[t].services.push(e))},e.getService=function(e,t){for(var r in n)for(var i=n[r].services?n[r].services:[],c=0;c<i.length;c++){var a=i[c].service_name;if(!t&&e==a&&e!=o.HTTP||t&&t==r&&e==a)return i[c]}return null},e.setManifest=function(e,t){n[e]||(n[e]={}),n[e].manifest=t},e.getManifest=function(e){return n[e]&&n[e].manifest?n[e].manifest:null},e.setRunning=function(e,t){n[e]||(n[e]={}),n[e].isRunning=t,n[e].isRunningStart=Date.now()},e.isRunning=function(e){if(!n[e]||!n[e].hasOwnProperty("isRunning"))return null;var o=Date.now()-n[e].isRunningStart;return o>t?null:n[e].isRunning},e.setApplicationURL=function(e,t){n[e]||(n[e]={}),n[e].urls=t,n[e].urls_start=Date.now()},e.getApplicationURL=function(e){if(!n[e]||!n[e].hasOwnProperty("urls"))return null;var o=Date.now()-n[e].urls_start;return o>t?null:n[e].urls}}e.exports=o},function(e,n,t){"use strict";function o(){var e,n=this,t=window.spe?window.spe:window,o=window.spl?window.spl:window,r=(new t.SpaceifyError,new t.SpaceifyUtility,new t.SpaceifyNetwork),i=t.SpaceifyConfig.getConfig(),c=o.LoaderUtil.getLoaderUtil(),a=null,u=[],l=[],s=null,f=null,p="undefined"==typeof window,d="undefined"!=typeof window.isSpaceifyNetwork&&window.isSpaceifyNetwork,g=!1,y=d||p?new WebSocketRpcConnection:c.getPiperClient();n.connect=function(t,o){u=[],l=[];var c,b;return s=o,f=t,g?f.connected():void r.doOperation({type:"requestMessageId"},function(t,o){return t?w(t):(e=o,y.exposeRpcMethod("stdout",n,R),y.exposeRpcMethod("fail",n,w),y.exposeRpcMethod("error",n,h),y.exposeRpcMethod("warning",n,m),y.exposeRpcMethod("notify",n,v),y.exposeRpcMethod("message",n,S),y.exposeRpcMethod("question",n,E),y.exposeRpcMethod("questionTimedOut",n,O),y.exposeRpcMethod("end",n,C),void(d||p?y.connect({hostname:i.EDGE_HOSTNAME,port:i.APPMAN_MESSAGE_PORT_SECURE,isSecure:!0},function(n,t){return n?w(n):(g=!0,y.callRpc("confirm",[e]),void f.connected())}):(c=r.getProtocol(!1,null,!1),b=r.getEdgeURL({forceSecureProtocol:null,ownProtocol:null,port:null,withEndSlash:!1}),y.createWebSocketTunnel({host:b,port:port,protocol:c},null,function(n){a=n,g=!0,piperClient.callClientRpc(a,"confirm",[e],this,function(e,n){f.connected()})}))))})},n.isConnected=function(){return g},n.getErrors=function(){return u},n.getWarnings=function(){return l};var w=function(e,n,t){g=!1,s.fail&&s.fail(e),f.fail(e),"function"==typeof t&&t(null,!0)},h=function(e,n,t){u.push(e),"function"==typeof t&&t(null,!0)},m=function(e,n,t,o){m.push({message:e,code:n}),s.warning&&s.warning(e,n),"function"==typeof o&&o(null,!0)},v=function(e,n,t,o){s.notify&&s.notify(e,n,t,o),"function"==typeof o&&o(null,!0)},S=function(e,n,t){s.message&&s.message(e),"function"==typeof t&&t(null,!0)},R=function(e,n,t){s.stdout&&s.stdout(e),"function"==typeof t&&t(null,!0)},E=function(e,n,t,o,r,i){s.question&&s.question(e,n,t,o),"function"==typeof i&&i(null,!0)},O=function(e,n,t,o,r){s.questionTimedOut&&s.questionTimedOut(e,n,t),"function"==typeof r&&r(null,!0)},C=function(e,n,t){f.end(1),"function"==typeof t&&t(null,!0)};n.sendAnswer=function(n,t){d||p?y.callRpc("answer",[e,n,t]):y.callClientRpc(a,"answer",[e,n,t])}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n=0,t={spacelet:{},sandboxed:{},sandboxed_debian:{},native_debian:{},spaceletCount:0,sandboxedCount:0,sandboxedDebianCount:0,nativeDebianCount:0},o=window.WEBPACK_LIBRARYNAME?window.WEBPACK_LIBRARYNAME:window,r=new o.SpaceifyCore,i=new o.SpaceifyUtility,c=new o.SpaceifyNetwork,a=o.SpaceifyConfig.getConfig();e.showLoading=function(e){e?(0==n&&$("#loading").show(),n++):(n=Math.max(0,--n),0==n&&$("#loading").hide())},e.showError=function(e){u(e,"error")},e.showSuccess=function(e){u(e,"success")};var u=function(e,n){var t;(t=$("#alerting")).length>0&&t.remove(),t=$('<span class="edgeAlert '+n+'" id="alerting">'+e+"</span>"),$(document.body).append(t),t.css("left",($(window).width()-t.width())/2),t.css("visibility","visible"),window.setTimeout(function(){t.remove()},5e3)};e.onEnterPress=function(e){var n=null==typeof e?window.event.keyCode:e.keyCode;return 13==n||10==n},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};var l=function(e){return angular.element(document.getElementById(e)).scope()};e.setSplashAccepted=function(){try{r.setSplashAccepted(function(e,n){n&&1==n&&window.location.reload(!0)})}catch(e){}},e.loadCertificate=function(){return document.getElementById("certIframe").src=c.getEdgeURL({forceSecureProtocol:!1,ownProtocol:null,port:null,withEndSlash:!0})+"spaceify.crt",!0},e.loadAppstorePage=function(){var e=c.getEdgeURL({forceSecureProtocol:!0,ownProtocol:null,port:null,withEndSlash:!0});spaceifyLoader.loadPage(e+a.APPSTORE_INDEX_FILE,e+a.APPSTORE,e)},e.loadLaunchPage=function(){var e=c.getEdgeURL({forceSecureProtocol:!0,ownProtocol:null,port:null,withEndSlash:!0});spaceifyLoader.loadPage(e+a.INDEX_FILE,e,e)},e.showInstalledApplications=function(n){$("#spacelet").empty(),$("#sandboxed").empty(),$("#sandboxedDebian").empty(),$("#nativeDebian").empty();var t,o=[];r.getApplicationData(function(r,i){if(!i)return"function"==typeof n&&n();for(t=0;t<i.spacelet.length;t++)o.push({object:e,method:e.renderTile,params:[i.spacelet[t],null],type:"async"});for(t=0;t<i.sandboxed.length;t++)o.push({object:e,method:e.renderTile,params:[i.sandboxed[t],null],type:"async"});for(t=0;t<i.sandboxed_debian.length;t++)o.push({object:e,method:e.renderTile,params:[i.sandboxed_debian[t],null],type:"async"});for(t=0;t<i.native_debian.length;t++)o.push({object:e,method:e.renderTile,params:[i.native_debian[t],null],type:"async"});(new SpaceifySynchronous).waterFall(o,function(){"function"==typeof n&&n()})})},e.renderTile=function(e,n){var t,o,u,f,p,d,g,y;e.hasTile?r.getApplicationURL(e.unique_name,function(r,i){u=c.isSecure()?i.securePort:i.port,p=c.getEdgeURL({forceSecureProtocol:!1,ownProtocol:null,port:null,withEndSlash:!0}),f=i.implementsWebServer&&u?c.getEdgeURL({forceSecureProtocol:!1,ownProtocol:null,port:u,withEndSlash:!0}):c.externalResourceURL(e.unique_name,{forceSecureProtocol:!1,ownProtocol:null,port:null,withEndSlash:!0}),d=a.TILEFILE,y="apptile_"+e.unique_name.replace("/","_"),l("edgeBody").addTile({type:"apptile",container:e.type,manifest:e,id:y,callback:function(){o={},o.sp_host=encodeURIComponent(f),o.sp_path=encodeURIComponent(d),o.spe_host=encodeURIComponent(p),t=document.getElementById(y),t.src=f+d+c.remakeQueryString(o,{},{},"",!0),n()}})}):((g=i.getApplicationIcon(e,!1))?(f=c.externalResourceURL(e.unique_name,{forceSecureProtocol:!1,ownProtocol:null,port:null,withEndSlash:!0}),d=g):(f=c.getEdgeURL({forceSecureProtocol:!1,ownProtocol:null,port:null,withEndSlash:!0}),d="images/icon.png"),y="iconimage_"+e.unique_name.replace("/","_"),l("edgeBody").addTile({type:"tile",container:e.type,manifest:e,id:y,sp_src:f+d,callback:function(){spaceifyLoader.loadData(document.getElementById(y),n)}})),s(e)},e.removeTile=function(e){var n=e.unique_name.replace(/\//,"_");$("#"+n).remove(),f(e)};var s=function(e){e.type==a.SPACELET?(t.spacelet[e.unique_name]=e,t.spaceletCount++):e.type==a.SANDBOXED?(t.sandboxed[e.unique_name]=e,t.sandboxedCount++):e.type==a.SANDBOXED_DEBIAN?(t.sandboxed_debian[e.unique_name]=e,t.sandboxedDebianCount++):e.type==a.NATIVE_DEBIAN&&(t.native_debian[e.unique_name]=e,t.nativeDebianCount++)},f=function(e){e.type==a.SPACELET?(delete t.spacelet[e.unique_name],t.spaceletCount--):e.type==a.SANDBOXED?(delete t.sandboxed[e.unique_name],t.sandboxedCount--):e.type==a.SANDBOXED_DEBIAN?(delete t.sandboxed_debian[e.unique_name],t.sandboxedDebianCount--):e.type==a.NATIVE_DEBIAN&&(delete t.native_debian[e.unique_name],t.nativeDebianCount--)};e.getApplications=function(){return t}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n=0,t=[],o={},r=null,i=null;e.waterFall=function(e,n){if(e&&0!=e.length||"function"!=typeof n){if(!e||0==e.length||"function"!=typeof n)return}else n(o);i=n,t=e,c()};var c=function(){if(0==t.length)return i();var e=t.shift();"async"==e.type?(r=e.params[e.params.length-1],e.params[e.params.length-1]=a,e.method.apply(e.object,e.params)):(o[++n]=e.method.apply(e.object,e.params),c())},a=function(){o[++n]=Array.prototype.slice.call(arguments),"function"==typeof r&&r.apply(this,arguments),c()};e.getResult=function(e){return o[e]?o[e]:null},e.getResults=function(){return o}}e.exports=o},function(e,n,t){"use strict";function o(){var e=this,n=window.spe?window.spe:window,t=new n.SpaceifyCore,o=new n.SpaceifyService,r=new n.SpaceifyNetwork;e.start=function(e,n,r){try{t.startSpacelet(n,function(n,t){if(n)"function"==typeof e?e(n,!1):e&&e.fail&&e.fail(n);else for(var r=0;r<t.serviceNames.length;r++)o.connect(t.serviceNames[r],r+1!=t.serviceNames.length?null:function(n,t){"function"==typeof e?e(null,!0):e&&e.start&&e.start()})})}catch(n){"function"==typeof e?e(n,!1):e&&e.fail&&e.fail(n)}},e.getRequiredService=function(e){return o.getRequiredService(e)},e.getRequiredServiceSecure=function(e){return o.getRequiredServiceSecure(e)},e.isSpaceifyNetwork=function(e,n){r.isSpaceifyNetwork(e,n)}}e.exports=o},function(e,n,t){"use strict";function o(e){var n=this,o="undefined"==typeof window,r=null,i=null,c=null,a=null;o?(r="/var/lib/spaceify/code/",i=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),c=t(9)(r+"rpccommunicator"),a=t(11)(r+"websocketconnection")):(r=window.spe?window.spe:window,i=r.Logger,c=r.RpcCommunicator,a=r.WebSocketConnection);var u=new c,l=new a,s=i.getLogger("WebRtcClient"),f=null,p=new Object;n.setConnectionListener=function(e){f=e},n.onIceCandidate=function(e,n){s.log("WebRtcClient::onIceCandidate - Got it, sending it to the other client"),u.callRpc("offerIce",[e,n])};var d=function(t){p[t]=new WebRtcConnection(e),p[t].setPartnerId(t),p[t].setIceListener(n),p[t].setStreamListener(n),p[t].setConnectionListener(n),p[t].setDataChannelListener(n)};n.shutdown=function(e){s.log("WebRtcClient::onbeforeunload");for(var n in p)p.hasOwnProperty(n)&&(p[n].close(),delete p[n])},n.handleRtcOffer=function(e,n,t){s.log("WebRtcClient::handleRtcOffer descriptor:",e),p.hasOwnProperty(n)||d(n),p[n].onConnectionOfferReceived(e,t,function(e){s.log("WebRtcClient::handleRtcOffer - onConnectionOfferReceived returned"),u.callRpc("acceptConnectionOffer",[e,n])})},n.handleRtcAnswer=function(e,n,t){s.log("WebRtcClient::handleRtcAnswer"),p[n].onConnectionAnswerReceived(e)},n.handleIceCandidate=function(e,n,t){s.log("WebRtcClient::handleIceCandidate"),p.hasOwnProperty(n)||d(n),p[n].onIceCandidateReceived(e)};var g=function(e,n){s.log("WebRtcClient::connectToCoordinator","> Websocket connecting to the coordinator"),l.connect(e,function(){s.log("WebRtcClient::connectToCoordinator - Websocket Connected to the Coordinator"),s.log("> Creating RPCCommunicator for the Websocket"),u.addConnection(l),n()})};n.onDisconnected=function(e){if(s.log("WebRtcClient::onDisconnected"),p.hasOwnProperty(e)){var n=p[e];f.onDisconnected(n.getId()),n.close(),delete p[e]}},n.onDataChannelOpen=function(e){s.log("WebRtcClient::onDataChannelOpen"),f.addConnection(e)},n.onStream=function(e,n){s.log("WebRtcClient::onStream")},n.onRemoveStream=function(e,t){s.log("WebRtcClient::onRemoveStream"),n.onDisconnected(t)};var y=function(e,t){s.log("WebRtcClient::connectToPeers - Announcing to the Coordinator"),u.callRpc("announce",[e],n,n.onPeerIdsArrived)};n.onPeerIdsArrived=function(e,n,t){s.log("WebRtcClient::onPeerIdsArrived - data.length:",n.length);for(var o=0,r=0;r<n.length;r++)o=n[r],d(o),s.log("WebRtcClient::onPeerIdsArrived - Trying to create offer to client id",o),p[o].createConnectionOffer(function(e,n){s.log("WebRtcClient::onPeerIdsArrived - Offer created, sending it to the other client",n),u.callRpc("offerConnection",[e,n])});0===n.length&&s.log("> Announce returned 0 client ids, not connecting")},n.run=function(e,t){s.log("WebRtcClient::run"),window.onbeforeunload=n.shutdown,u.exposeRpcMethod("handleRtcOffer",n,n.handleRtcOffer),u.exposeRpcMethod("handleRtcAnswer",n,n.handleRtcAnswer),u.exposeRpcMethod("handleIceCandidate",n,n.handleIceCandidate),g(e,function(){s.log("WebRtcClient::run - Connected to the coordinator"),y(e.announceId,function(){s.log("WebRtcClient::run - connectToPeers returned")}),t&&t(u)})}}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,e.exports=o},function(e,n,t){"use strict";function o(e){var n=this,t="undefined"==typeof window,o=null,a=null;t?(o="/var/lib/spaceify/code/",a=!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}()):(o=window.spe?window.spe:window,a=o.Logger);var u=a.getLogger("WebRtcConnection"),l=null,s=null,f=null,p=null,d=null,g=null,y=null,w=null,h={optional:[{DtlsSrtpKeyAgreement:!0}]},m=new r(e,h),v=null;m.ondatachannel=function(e){var t=e.channel||e;u.log("WebRtcConnection::peerConnection.ondatachannel",e),v=t,v.binaryType="arraybuffer",v.onopen=n.onDataChannelOpen,v.onmessage=n.onMessage};var S=function(e){u.log("WebRtcConnection::onsignalingstatechange",e)},R=function(e){u.log("WebRtcConnection::oniceconnectionstatechange",e),"function"!=y||"disconnected"!=m.iceConnectionState&&"closed"!=m.iceConnectionState||y.onDisconnected(f)},E=function(e){u.log("WebRtcConnection::onicegatheringstatechange",e)},O=function(e){u.log("WebRtcConnection::onIceCanditate - partnerId:",f,", event:",e,"> iceListener was",p),null==e.candidate?u.log("> All Ice candidates listed"):p.onIceCandidate(e.candidate,f)};m.onsignalingstatechange=S,m.oniceconnectionstatechange=R,m.onicegatheringstatechange=E,m.onicecandidate=O,n.close=function(){u.log("WebRtcConnection::close"),v.close(),"closed"!=m.signalingState&&m.close()},n.send=function(e){try{"open"==v.readyState&&v.send(e)}catch(e){u.error(e,!0,!0,u.ERROR)}},n.getBufferedAmount=function(){return v.bufferedAmount},n.sendBinary=function(e){try{"open"==v.readyState&&v.send(e)}catch(e){u.error(e,!0,!0,u.ERROR)}},n.onDataChannelClosed=function(e){u.log("WebRtcConnection::onDataChannelClosed",e),y.onDisconnected(n)},n.onDataChannelOpen=function(e){u.log("WebRtcConnection::onDataChannelOpen",e),v.binaryType="arraybuffer",v.onclose=n.onDataChannelClosed,v.onmessage=n.onMessage,w&&w.onDataChannelOpen(n)},n.onMessage=function(e){try{g&&g.onMessage(e.data,n)}catch(e){u.error(e,!0,!0,u.ERROR)}},n.setId=function(e){l=e},n.getId=function(){return l},n.getPartnerId=function(){return f},n.setPartnerId=function(e){f=e},n.setDataChannelListener=function(e){w=e},n.setListener=function(e){g=e},n.setIceListener=function(e){p=e,u.log("WebRtcConnection::setIceListener",e)},n.setStreamListener=function(e){d=e,m.onaddstream=function(e){n.onStream(e)},m.onremovestream=function(e){n.onRemoveStream(e)}},n.setEventListener=function(e){y=e},n.onStream=function(e){u.log("WebRtcConnection::onStream",e),d.onStream(e.stream,f)},n.onRemoveStream=function(e){u.log("WebRtcConnection::onStream",e),d.onRemoveStream(e.stream,f)},n.addStream=function(e){s=e,m.addStream(e)},n.createConnectionOffer=function(e){var t=null;v=m.createDataChannel("jsonrpcchannel",{reliable:!0}),v.binaryType="arraybuffer",v.onopen=n.onDataChannelOpen,v.onmessage=n.onMessage,m.createOffer(function(n){u.log("WebRtcConnection::peerConnectio.createOffer - Called its callback:",n),t=n,m.setLocalDescription(n,function(){e(m.localDescription,f)},function(e){u.error(e,!0,!0,u.ERROR)},{})},function(e){u.error(e,!0,!0,u.ERROR)})},n.onConnectionAnswerReceived=function(e){u.log("WebRtcConnection::onConnectionAnswerReceived, descriptor:",e),m.setRemoteDescription(new i(e),function(){u.log("WebRtcConnection::onConnectionAnswerReceived() - setRemoteDescription returned OK")},function(e){u.error(e,!0,!0,u.ERROR)})},n.onConnectionOfferReceived=function(e,n,t){u.log("WebRtcConnection::onConnectionOfferReceived - Trying to set remote description");var o=new i(e);m.setRemoteDescription(o,function(){u.log("WebRtcConnection::onConnectionOfferReceived Remote description set"),m.createAnswer(function(e){m.setLocalDescription(e,function(){t(m.localDescription)},function(e){u.error(e,!0,!0,u.ERROR)})},function(e){u.error(e,!0,!0,u.ERROR)})},function(e){u.error(e,!0,!0,u.ERROR)})},n.onIceCandidateReceived=function(e){m.addIceCandidate(new c(e),function(){u.log("WebRtcConnection::onIceCandidateReceived - Adding Ice candidate succeeded")},function(e){u.error(e,!0,!0,u.ERROR)})},n.setPipedTo=function(e){},n.getPipedTo=function(){return null}}var r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,i=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,c=window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate;e.exports=o},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=42},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=43},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./loggerconfig.js":5};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=44},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./service":13,"./spaceifyservice":7};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=45},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./spaceifynetwork":16};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=46},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./spaceifyservice":7};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=47},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=48},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./webjsonrpc/websocketrpcserver":24};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=49},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=50},function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=51},function(e,n,t){function o(e){return t(r(e))}function r(e){var n=i[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var i={"./websocketserver":25};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=52},function(e,n){e.exports=t},function(e,n){e.exports=require("child_process")},function(e,n){e.exports=r},function(e,n){e.exports=i},function(e,n){e.exports=c},function(e,n){e.exports=a},function(e,n){e.exports=u},function(e,n){e.exports=l},function(e,n){e.exports=s},function(e,n){e.exports=f},function(e,n,t){e.exports={LoggerConfig:t(5),Logger:t(12),Service:t(13),SpaceifyApplication:t(33),SpaceifyApplicationManager:t(34),SpaceifyCache:t(35),SpaceifyConfig:t(14),SpaceifyCore:t(15),SpaceifyError:t(6),SpaceifyMessages:t(36),SpaceifyNet:t(37),SpaceifyNetwork:t(16),SpaceifyService:t(7),SpaceifySynchronous:t(38),SpaceifyUnique:t(17),SpaceifyUtility:t(18),Spacelet:t(39),BinaryRpcCommunicator:t(19),CallbackBuffer:t(20),RpcCommunicator:t(21),WebRtcClient:t(40),WebRtcConnection:t(41),WebSocketConnection:t(22),WebSocketRpcConnection:t(23),WebSocketRpcServer:t(24),WebSocketServer:t(25)}}])});
(function spaceifyConfig(){window.speconfig={"SPACEIFY_PATH":"/var/lib/spaceify/","SPACEIFY_CODE_PATH":"/var/lib/spaceify/code/","SPACEIFY_DATA_PATH":"/var/lib/spaceify/data/","SPACEIFY_WWW_PATH":"/var/lib/spaceify/code/www/","SPACEIFY_NODE_MODULES_PATH":"/var/lib/spaceify/code/node_modules/","SPACEIFY_WWW_ERRORS_PATH":"/var/lib/spaceify/code/www/errors/","SPACEIFY_TLS_PATH":"/var/lib/spaceify/data/tls/","SPACEIFY_DATABASE_FILE":"/var/lib/spaceify/data/db/spaceify.db","SPACEIFY_TEMP_SESSIONID":"/var/lib/spaceify/data/db/session.id","SPACEIFY_REGISTRATION_FILE":"/var/lib/spaceify/data/db/edge.id","SPACEIFY_REGISTRATION_FILE_TMP":"/tmp/edge.id","SPACEIFY_MANIFEST_RULES_FILE":"/var/lib/spaceify/data/manifest/manifest.rules","SPACELETS_PATH":"/var/lib/spaceify/data/spacelets/","SANDBOXED_PATH":"/var/lib/spaceify/data/sandboxed/","SANDBOXED_DEBIAN_PATH":"/var/lib/spaceify/data/sandboxed_debian/","NATIVE_DEBIAN_PATH":"/var/lib/spaceify/data/native_debian/","INSTALLED_PATH":"/var/lib/spaceify/data/installed/","DOCS_PATH":"/var/lib/spaceify/data/docs/","VERSION_FILE":"/var/lib/spaceify/versions","WWW_DIRECTORY":"www/","API_PATH":"/api/","API_WWW_PATH":"/var/lib/spaceify/code/www/","API_NODE_MODULES_DIRECTORY":"/var/lib/spaceify/code/node_modules/","APPLICATION_ROOT":"application","APPLICATION_PATH":"/application/","APPLICATION_DIRECTORY":"application/","VOLUME_PATH":"/volume/","VOLUME_DIRECTORY":"volume/","VOLUME_APPLICATION_PATH":"/volume/application/","VOLUME_APPLICATION_WWW_PATH":"/volume/application/www/","VOLUME_TLS_PATH":"/volume/tls/","SYSTEMD_PATH":"/lib/systemd/system/","START_SH_FILE":"application/start.sh","WORK_PATH":"/tmp/package/","PACKAGE_PATH":"package/","SOURCES_DIRECTORY":"sources/","LOCALES_PATH":"/var/lib/spaceify/code/www/locales/","DEFAULT_LOCALE":"en_US","SPACEIFY_INJECT":"/var/lib/spaceify/code/www/lib/inject/spaceify.csv","LEASES_PATH":"/var/lib/spaceify/data/dhcp-data","IPTABLES_PATH":"/var/lib/spaceify/data/ipt-data","IPTABLES_PIPER":"/var/lib/spaceify/data/dev/iptpiper","IPTABLES_PIPEW":"/var/lib/spaceify/data/dev/iptpipew","TLS_DIRECTORY":"tls/","TLS_SCRIPTS_PATH":"/var/lib/spaceify/data/scripts/","UBUNTU_DISTRO_NAME":"ubuntu","RASPBIAN_DISTRO_NAME":"raspbian","UBUNTU_DOCKER_IMAGE":"spaceifyubuntu","RASPBIAN_DOCKER_IMAGE":"spaceifyraspbian","CUSTOM_DOCKER_IMAGE":"custom_","EDGE_IP":"10.0.0.1","EDGE_HOSTNAME":"edge.spaceify.net","EDGE_SHORT_HOSTNAME":"e.n","EDGE_SUBNET":"10.0.0.0/16","ALL_IPV4_LOCAL":"0.0.0.0","CONNECTION_HOSTNAME":"localhost","APPLICATION_SUBNET":"172.17.0.0/16","EDGE_PORT_HTTP":"80","EDGE_PORT_HTTPS":"443","CORE_PORT":"2947","CORE_PORT_SECURE":"4947","APPMAN_PORT":"2948","APPMAN_PORT_SECURE":"4948","APPMAN_MESSAGE_PORT":"2950","APPMAN_MESSAGE_PORT_SECURE":"4950","OPERATION":"templates/operation.html","APPSTORE":"appstore/","APPSTORE_INDEX_FILE":"appstore/index.html","REGISTRY_HOSTNAME":"spaceify.org","REGISTRY_URL":"https://spaceify.org","REGISTRY_PUBLISH_URL":"https://spaceify.org/ajax/upload.php?type=package&fileid=package","REGISTRY_INSTALL_URL":"https://spaceify.org/install.php","EDGE_APPSTORE_GET_PACKAGES_URL":"https://spaceify.org/appstore/getpackages.php","EDGE_REGISTER_URL":"https://spaceify.net/edge/register.php","EDGE_LOGIN_URL":"https://spaceify.net/edge/login.php","EDGE_GET_RESOURCE_URL":"spaceify.org/appstore/getresource.php?resource=","GITHUB_HOSTNAME":"github.com","MAC_REGX":"^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$","IP_REGX":"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$","JAVASCRIPT":"javascript","CSS":"css","FILE":"file","UTF8":"utf","ASCII":"ascii","BASE64":"base64","ANY":"any","ALL":"all","SPACELET":"spacelet","SANDBOXED":"sandboxed","SANDBOXED_DEBIAN":"sandboxed_debian","NATIVE_DEBIAN":"native_debian","OPEN":"open","OPEN_LOCAL":"open_local","STANDARD":"standard","ALIEN":"alien","HTTP":"http","EXT_COMPRESSED":".zip","PACKAGE_DELIMITER":"@","PX":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","MANIFEST":"spaceify.manifest","README_MD":"readme.md","PACKAGE_ZIP":"package.zip","PUBLISH_ZIP":"publish.zip","SPM_ERRORS_JSON":"spm_errors.json","SPM_HELP":"spm.help","DOCKERFILE":"Dockerfile","MANIFEST_RULES":"manifest.rules","VERSIONS":"versions","INDEX_FILE":"index.html","SERVER_NAME":"Spaceify Web Server","TILEFILE":"tile.html","WEB_SERVER":"WEB_SERVER","APPLICATION_INITIALIZED":"*** application initialized","APPLICATION_UNINITIALIZED":"*** application uninitialized","IMAGE_DIRECTORY":"www/images/","FIRST_SERVICE_PORT":"2777","FIRST_SERVICE_PORT_SECURE":"3777","SERVER_CRT":"server.crt","SERVER_KEY":"server.key","SPACEIFY_CRT":"spaceify.crt","SPACEIFY_CRT_WWW":"www/spaceify.crt","RECONNECT_WAIT":"10000","SESSION_COOKIE_PUBSUB_PATH":"/var/lib/spaceify/data/db/session_cookies.pub","SPACEIFY_REPOSITORY":"deb [ arch=all,amd64,i386 ] http://spaceify.net/repo stable/spaceify main","SPACEIFY_APPLICATION_REPOSITORY_LIST":"/etc/apt/sources.list.d/spaceifyapplication.list","EVENT_SPACELET_INSTALLED":"spaceletInstalled","EVENT_SPACELET_REMOVED":"spaceletRemoved","EVENT_SPACELET_STARTED":"spaceletStarted","EVENT_SPACELET_STOPPED":"spaceletStopped","EVENT_SANDBOXED_INSTALLED":"sandboxedInstalled","EVENT_SANDBOXED_REMOVED":"sandboxedRemoved","EVENT_SANDBOXED_STARTED":"sandboxedStarted","EVENT_SANDBOXED_STOPPED":"sandboxedStopped","EVENT_SANDBOXED_DEBIAN_INSTALLED":"sandboxedDebianInstalled","EVENT_SANDBOXED_DEBIAN_REMOVED":"sandboxedDebianRemoved","EVENT_SANDBOXED_DEBIAN_STARTED":"sandboxedDebianStarted","EVENT_SANDBOXED_DEBIAN_STOPPED":"sandboxedDebianStopped","EVENT_NATIVE_DEBIAN_INSTALLED":"nativeDebianInstalled","EVENT_NATIVE_DEBIAN_REMOVED":"nativeDebianRemoved","EVENT_NATIVE_DEBIAN_STARTED":"nativeDebianStarted","EVENT_NATIVE_DEBIAN_STOPPED":"nativeDebianStopped","EVENT_EDGE_SETTINGS_CHANGED":"EdgeSettingsChanged","EVENT_CORE_SETTINGS_CHANGED":"CoreSettingsChanged","SESSION_TOKEN_NAME":"x-edge-session","SESSION_TOKEN_NAME_COOKIE":"xedgesession"};})();

(function spaceifyClasses(){
window.Logger = spe.Logger;
window.Service = spe.Service;
window.SpaceifyApplication = spe.SpaceifyApplication;
window.SpaceifyApplicationManager = spe.SpaceifyApplicationManager;
window.SpaceifyCache = spe.SpaceifyCache;
window.SpaceifyConfig = spe.SpaceifyConfig;
window.SpaceifyCore = spe.SpaceifyCore;
window.SpaceifyError = spe.SpaceifyError;
window.SpaceifyMessages = spe.SpaceifyMessages;
window.SpaceifyNet = spe.SpaceifyNet;
window.SpaceifyNetwork = spe.SpaceifyNetwork;
window.SpaceifyService = spe.SpaceifyService;
window.SpaceifySynchronous = spe.SpaceifySynchronous;
window.SpaceifyUnique = spe.SpaceifyUnique;
window.SpaceifyUtility = spe.SpaceifyUtility;
window.Spacelet = spe.Spacelet;
window.BinaryRpcCommunicator = spe.BinaryRpcCommunicator;
window.CallbackBuffer = spe.CallbackBuffer;
window.RpcCommunicator = spe.RpcCommunicator;
window.WebRtcClient = spe.WebRtcClient;
window.WebRtcConnection = spe.WebRtcConnection;
window.WebSocketConnection = spe.WebSocketConnection;
window.WebSocketRpcConnection = spe.WebSocketRpcConnection;
window.WebSocketRpcServer = spe.WebSocketRpcServer;
window.WebSocketServer = spe.WebSocketServer;
window.SpaceifyApp = spe.SpaceifyApp;})();
